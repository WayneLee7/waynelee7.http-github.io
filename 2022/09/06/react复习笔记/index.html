<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="alternate" href="/atom.xml" title="李凤伟的小站" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"always","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>

  <meta name="description" content="React复习手册前言：又要准备准备面试啦，本文取自社区大佬的文章，从头至尾整理一下React知识点，当做再复习一遍啦，10月冲冲冲！！！概述React是一个用于构建用户界面的JavaScript库。主要用来写HTML页面或构建Web应用。特点 声明式：只需要去描述UI看起来是什么样子，就和写HTML一样； 基于组件：组件是React中最重要的内容，组件表示页面中部分内容，通过组合、服用多个组件来">
<meta property="og:type" content="article">
<meta property="og:title" content="react复习笔记">
<meta property="og:url" content="http://yoursite.com/2022/09/06/react复习笔记/index.html">
<meta property="og:site_name" content="李凤伟的小站">
<meta property="og:description" content="React复习手册前言：又要准备准备面试啦，本文取自社区大佬的文章，从头至尾整理一下React知识点，当做再复习一遍啦，10月冲冲冲！！！概述React是一个用于构建用户界面的JavaScript库。主要用来写HTML页面或构建Web应用。特点 声明式：只需要去描述UI看起来是什么样子，就和写HTML一样； 基于组件：组件是React中最重要的内容，组件表示页面中部分内容，通过组合、服用多个组件来">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="c:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220907154305018.png">
<meta property="og:updated_time" content="2022-09-07T15:24:14.344Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="react复习笔记">
<meta name="twitter:description" content="React复习手册前言：又要准备准备面试啦，本文取自社区大佬的文章，从头至尾整理一下React知识点，当做再复习一遍啦，10月冲冲冲！！！概述React是一个用于构建用户界面的JavaScript库。主要用来写HTML页面或构建Web应用。特点 声明式：只需要去描述UI看起来是什么样子，就和写HTML一样； 基于组件：组件是React中最重要的内容，组件表示页面中部分内容，通过组合、服用多个组件来">
<meta name="twitter:image" content="c:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20220907154305018.png">

<link rel="canonical" href="http://yoursite.com/2022/09/06/react复习笔记/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>react复习笔记 | 李凤伟的小站</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


  <!-- 爆炸红心效果 -->
<canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
<script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
<script type="text/javascript" src="/js/firework.js"></script>
<!-- 添加动态线条背景 -->

<script type="text/javascript" color="0,0,0" opacity='1.0'  src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>


</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
   <a href="https://your-url" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">李凤伟的小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/09/06/react复习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WayneLee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="李凤伟的小站">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          react复习笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-09-06 22:14:35" itemprop="dateCreated datePublished" datetime="2022-09-06T22:14:35+08:00">2022-09-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-07 23:24:14" itemprop="dateModified" datetime="2022-09-07T23:24:14+08:00">2022-09-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="React复习手册"><a href="#React复习手册" class="headerlink" title="React复习手册"></a>React复习手册</h1><p>前言：又要准备准备面试啦，本文取自社区大佬的文章，从头至尾整理一下React知识点，当做再复习一遍啦，10月冲冲冲！！！</p><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>React是一个用于构建用户界面的JavaScript库。主要用来写HTML页面或构建Web应用。</p><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>声明式：只需要去描述UI看起来是什么样子，就和写HTML一样；</li>
<li>基于组件：组件是React中最重要的内容，组件表示页面中部分内容，通过组合、服用多个组件来完成这页面。</li>
<li><p>学习一次，随处使用：可以开发Web应用，移动端原生应用（react-navive）、虚拟现实应用等。 React Native (简称RN)是Facebook于2015年4月开源的跨平台移动应用开发框架，是Facebook早先开源的JS框架 React 在原生移动应用平台的衍生产物</p>
</li>
<li><p>高效 (优秀的Diffing算法)</p>
</li>
</ul><a id="more"></a>


<h3 id="react-高效的原因"><a href="#react-高效的原因" class="headerlink" title="react 高效的原因"></a>react 高效的原因</h3><ol>
<li>使用虚拟 DOM，不总是直接操作页面真实 DOM</li>
<li>DOM Diffing 算法，最小化页面重绘</li>
<li>React并不会提高渲染速度，反而可能会增加渲染时间，真正高效的原因是他能有效减少渲染次数</li>
</ol>
<h3 id="创建虚拟DOM的两种方式"><a href="#创建虚拟DOM的两种方式" class="headerlink" title="创建虚拟DOM的两种方式"></a>创建虚拟DOM的两种方式</h3><ol>
<li><p>js 创建虚拟DOM(不推荐)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//创建虚拟DOM 创建嵌套格式的doms</span><br><span class="line">const VDOM=React.createElement(&apos;h1&apos;,&#123;id:&apos;title&apos;&#125;,React.createElement(&apos;span&apos;,&#123;&#125;,&apos;hello React&apos;))</span><br><span class="line">//渲染虚拟DOM到页面</span><br><span class="line">ReactDOM.render(VDOM,document.getElementById(&apos;test&apos;))</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>​    2.jsx创建虚拟DOM</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//创建虚拟DOM</span><br><span class="line">const VDOM = (</span><br><span class="line">	&lt;h1 id=&quot;title&quot;&gt;</span><br><span class="line">		&lt;span&gt;Hello,React&lt;/span&gt;</span><br><span class="line">	&lt;/h1&gt;</span><br><span class="line">)</span><br><span class="line">//渲染虚拟DOM到页面</span><br><span class="line">ReactDOM.render(VDOM,document.getElementById(&apos;test&apos;))</span><br><span class="line">//打印真实DOM与虚拟DOM，这一步不是jsx创建虚拟DOM必须</span><br><span class="line">const TDOM = document.getElementById(&apos;demo&apos;)</span><br><span class="line">console.log(&apos;虚拟DOM&apos;,VDOM);</span><br><span class="line">console.log(&apos;真实DOM&apos;,TDOM);</span><br></pre></td></tr></table></figure>
<p>可以看到，两种方式，明显jsx的写法更符合我们的习惯，当出现多重嵌套时，js创建方法会使我们编程出现很大麻烦</p>
<p>但是jsx其实也只是帮我们做了一层编译，写完jsx代码后，最终我们的代码也会被编译成js的书写方式</p>
<h3 id="关于虚拟DOM"><a href="#关于虚拟DOM" class="headerlink" title="关于虚拟DOM"></a>关于虚拟DOM</h3><ul>
<li>本质是Object类型的对象（一般对象）</li>
<li>虚拟DOM比较’轻’，真实DOM比较重，因为虚拟DOM是React内部在用，无需真实DOM上那么多的属性（只有React需要的属性）</li>
<li>虚拟DOM最终会被React转化为真实DOM，呈现在页面上</li>
</ul>
<h2 id="三个API"><a href="#三个API" class="headerlink" title="三个API"></a>三个API</h2><h3 id="React-createElement"><a href="#React-createElement" class="headerlink" title="React.createElement"></a>React.createElement</h3><p>用于创建React元素，React元素无法修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const button =React.createElement(&apos;button&apos;,&#123;</span><br><span class="line">id:&apos;btn&apos;,</span><br><span class="line">type:&apos;button&apos;,</span><br><span class="line">className:&apos;hello&apos;,</span><br><span class="line">onClick:()=&gt;&#123;alert(&apos;Clicked&apos;)&#125;</span><br><span class="line">&#125;,&apos;Click Me&apos;);</span><br><span class="line">const div=React.createElement(&apos;div&apos;,null,&apos;Content&apos;,button)</span><br></pre></td></tr></table></figure>
<ul>
<li>html标签必须小写</li>
<li>标签中的属性属性名：属性值</li>
<li>类的属性建议使用className，和js中的class关键字作区分</li>
<li>在设置事件属性时，属性名需修改为小驼峰命名法，属性值为函数</li>
<li>元素内容可以是文本内容，也可以加上子标签</li>
<li>React创建的元素一旦创建不可修改</li>
</ul>
<h3 id="ReactDOM-createRoot"><a href="#ReactDOM-createRoot" class="headerlink" title="ReactDOM.createRoot"></a>ReactDOM.createRoot</h3><p>创建React的根容器，用于放置React元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const root = ReactDOM.createRoot(document.querySelector(&apos;#root&apos;))</span><br></pre></td></tr></table></figure>
<h3 id="render"><a href="#render" class="headerlink" title="render"></a>render</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root.render(div)</span><br></pre></td></tr></table></figure>
<p>当首次调用时，容器节点里的所有DOM元素都会替换，后续的调用则会使用React 的DOM差分算法（DOM diffing algorithm）进行高效的更新。</p>
<p>不会修改容器节点（只会修改容器的子节点)。可以在不覆盖现有子节点的情况下，将组建插入已有的DOM节点中。</p>
<h2 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h2><p>JSX是一种JavaScript的语法扩展、是一种嵌入式的类似XML的语法,常应用于React架构中,但也不仅限于此.应该说JSX因React框架而流行,但也存在其他的实现.只要你够厉害,甚至能在单片机上实现(当然你要自己写出它的实现方式)</p>
<p>JSX是JavaScript XML的简写，是js的语法扩展，JSX使得我们可以以类似于html的形式去使用js。JSX便是React中声明式编程的体现方式。声明式编程，简单理解就是以结果为导向的编程。使用JSX将我们所期望的网页结构编写出来，然后React再根据JSX自动生成js代码。所以我们所编写的JSx代码，最终都会转为以调用 React.cteateElement()创建元素的代码。</p>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><ul>
<li>引用babel</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;./assets/js/babel.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>设置js代码被babel处理</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/babel&quot;&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用JSX语法创建React元素</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const button = &lt;button id=&quot;btn&quot;&gt;Click Me&lt;/button&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>创建根元素并渲染</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const root = ReactDOM.createRoot(document.querySelector(&apos;#root&apos;))</span><br><span class="line">root.render(button)</span><br></pre></td></tr></table></figure>
<h3 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a><strong>注意点</strong></h3><ol>
<li><p>JSX 不是字符串，外面不要加引号</p>
</li>
<li><p>JSX 中 html 标签应该小写开头，React 组件大写开头</p>
</li>
<li><p>有且只有一个跟标签</p>
</li>
<li><p>JSX 的标签必须正确结束（自结束标签必须写 / ）</p>
</li>
<li><p>如果元素没有子节点，React 元素可以通过 / （自闭合标签）结束，如<span></span></p>
</li>
<li><p>可以使用 {} 嵌入表达式（有值的语句），表达式中的数组会自动遍历</p>
</li>
<li><p>如果表达式中的值是 null，boolean，undefined 将不显示</p>
</li>
<li><p>内联样式,要用style={ {key:value} }的形式(双{  }代表对象,单{    }代表表达式)去写</p>
</li>
<li><p>属性可直接在标签中设置，属性名采用的是驼峰命名法</p>
</li>
<li><p>特殊属性名 class -&gt; className</p>
</li>
<li><p>style 必须使用对象的方式，命名使用小驼峰命名法 style={   {backgroundColor:’blue’}   }</p>
</li>
<li><p>推荐使用小括号包裹 JSX，避免 JS 中的自动插入分号陷阱</p>
</li>
<li><p>若小写字母开头,则将该标签转为html中同名元素,若html中无该标签对应的同名元素,则<code>报错</code></p>
<p>若大写字母开头,ract就去渲染对应组件,若组件没有定义,则报错</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const title=(</span><br><span class="line">	&lt;h1&gt;hello JSX</span><br><span class="line">		&lt;span /&gt;</span><br><span class="line">	&lt;/h1&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="JSX-中使用-js-表达式"><a href="#JSX-中使用-js-表达式" class="headerlink" title="JSX 中使用 js 表达式"></a>JSX 中使用 js 表达式</h3><p>嵌入js表达式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const name=&apos;wayne&apos;</span><br><span class="line">const title=(</span><br><span class="line">	&lt;h1&gt;Hello JSX &#123;name&#125;&lt;/h1&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>使用单花括号 {} 包裹 js 表达式进行使用</li>
<li>单花括号中可以使用任意的 js 表达式</li>
<li>JSX 自身也是一个 js 表达式，所以也可以把 JSX 写入花括号中</li>
<li>js 中的对象是一个例外，一般只会出现在 style 属性中</li>
<li>不能在花括号中出现语句（if / for 等）</li>
</ul>
<h3 id="JSX-的条件渲染"><a href="#JSX-的条件渲染" class="headerlink" title="JSX 的条件渲染"></a>JSX 的条件渲染</h3><p>根据条件渲染特定的 JSX 结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const isLoading = true;</span><br><span class="line">const loadData=()=&gt;&#123;</span><br><span class="line">	if(isLoading)&#123;</span><br><span class="line">		return&lt;div&gt;loading...&lt;/div&gt;</span><br><span class="line">	&#125;</span><br><span class="line">	return &lt;div&gt;loaded&lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JSX的列表渲染"><a href="#JSX的列表渲染" class="headerlink" title="JSX的列表渲染"></a>JSX的列表渲染</h3><p>可以使用 if / else 或三元表达式或逻辑与运算符来实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const list = &lt;ul&gt;</span><br><span class="line">				&#123;arr.map(item=&gt;&lt;li&gt;&#123;item&#125;&lt;/li&gt;)&#125;</span><br><span class="line">			&lt;ul&gt;</span><br></pre></td></tr></table></figure>
<h3 id="JSX的样式处理"><a href="#JSX的样式处理" class="headerlink" title="JSX的样式处理"></a>JSX的样式处理</h3><p>行内样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const title=(&lt;h1 style=&#123;&#123;color:&apos;blue&apos;,backgroundColor:&apos;yellow&apos;&#125;&#125;&gt;文本内容&lt;/h1&gt;)</span><br></pre></td></tr></table></figure>
<p>类名 className</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const title = (&lt;h1 className=&quot;title&quot;&gt;文本&lt;/h1&gt;)</span><br></pre></td></tr></table></figure>
<p>引入 css 文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &apos;./css/style.css&apos;</span><br></pre></td></tr></table></figure>
<h2 id="react组件"><a href="#react组件" class="headerlink" title="react组件"></a>react组件</h2><h3 id="函数式声明组件"><a href="#函数式声明组件" class="headerlink" title="函数式声明组件"></a>函数式声明组件</h3><p>执行了ReactDOM.render(<mycomponent>…….之后，发生了什么？</mycomponent></p>
<p>1.React解析组件标签，找到了MyComponent组件。</p>
<p>2.发现组件是使用函数定义的，随后调用该函数，将返回的虚拟DOM转为真实DOM，随后呈现在页面中。</p>
<h3 id="类式组件-下面的实例都是指类组件"><a href="#类式组件-下面的实例都是指类组件" class="headerlink" title="类式组件(下面的实例都是指类组件)"></a>类式组件(下面的实例都是指类组件)</h3><p>执行了ReactDOM.render(<mycomponent>…….之后，发生了什么？</mycomponent></p>
<p>​    1.React解析组件标签，找到了MyComponent组件。</p>
<p>​    2.发现组件是使用类定义的，随后new出来该类的实例，并通过该实例调用到原型上的render方法。</p>
<p>​    3.将render返回的虚拟DOM转为真实DOM，随后呈现在页面中。</p>
<p>组件中的render是放在哪里的？</p>
<p>​    MyComponent的原型对象上，供实例使用。</p>
<p>组件中的render中的this是谁？</p>
<p>​    MyComponent的实例对象 &lt;=&gt; MyComponent组件实例对象。</p>
<h3 id="模块与模块化"><a href="#模块与模块化" class="headerlink" title="模块与模块化"></a>模块与模块化</h3><p>① 模块</p>
<blockquote>
<ol>
<li>理解:向外提供特定功能的js程序,一般就是一个js文件</li>
<li>为什么要拆成模块:随着业务逻辑增加,代码越来越多且复杂</li>
<li>作用:复用js,简化js的编写,提高js运行效率</li>
</ol>
</blockquote>
<p>② 模块化</p>
<blockquote>
<p>当应用的js都以模块来编写,这个应用就是一个模块化的应用</p>
</blockquote>
<h3 id="组件与组件化"><a href="#组件与组件化" class="headerlink" title="组件与组件化"></a>组件与组件化</h3><p>① 组件</p>
<blockquote>
<ol>
<li><p>理解:用来实现局部功能效果的代码和资源的集合(html/css/js/img等等)</p>
</li>
<li><p>为什么要用组件:一个界面的功能复杂</p>
</li>
<li>作用:复用编码,简化项目编码,提高运行效率</li>
</ol>
</blockquote>
<p>② 组件化</p>
<blockquote>
<p>当应用是以多组件的方式实现,这个应用就是组件化的应用</p>
</blockquote>
<h2 id="React面向组件编程"><a href="#React面向组件编程" class="headerlink" title="React面向组件编程"></a>React面向组件编程</h2><ol>
<li><p>使用React开发者工具调试</p>
<p><code>React Developer Tools</code></p>
</li>
<li><p>注意</p>
<p>a) 组件名必须是首字母大写</p>
<p>b) 虚拟DOM元素只能有一个根元素</p>
<p>c) 虚拟DOM元素必须有结束标签 &lt; /&gt;</p>
</li>
<li><p>渲染类组件标签的基本流程</p>
<p>a) React内部会创建组件实例对象</p>
<p>b) 调用render()得到虚拟DOM,并解析为真实DOM</p>
<p>c) 插入到指定的页面元素内部</p>
</li>
</ol>
<h3 id="组件三大属性-state"><a href="#组件三大属性-state" class="headerlink" title="组件三大属性 state"></a>组件三大属性 state</h3><p> ①理解</p>
<blockquote>
<ol>
<li>state是组件对象最重要的属性,值是对象(可以包含多个key:value的组合)</li>
<li>组件被称为<code>状态机</code>,通过更新组件的state来更新对应的页面显示(重新渲染组件)</li>
</ol>
</blockquote>
<p>② 强烈注意</p>
<blockquote>
<ol>
<li><p>组件中的render方法中的this为组件实例对象</p>
</li>
<li><p>组件自定义方法中this为undefined,如何解决?</p>
</li>
</ol>
<p>a) 强制绑定this:通过函数对象的bind()</p>
<p>b) 箭头函数<code>推荐</code></p>
<ol start="3">
<li>状态数据,不能直接修改或者更新</li>
</ol>
</blockquote>
<p>代码示例 </p>
<p>正常的用函数对象的bind()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">//1.创建组件</span><br><span class="line">		class Weather extends React.Component&#123;</span><br><span class="line">			//构造器调用几次？ ———— 1次</span><br><span class="line">			constructor(props)&#123;</span><br><span class="line">				console.log(&apos;constructor&apos;);</span><br><span class="line">				super(props)</span><br><span class="line">				//初始化状态</span><br><span class="line">				this.state = &#123;isHot:false,wind:&apos;微风&apos;&#125;</span><br><span class="line">				//解决changeWeather中this指向问题,也可以在调用出直接使用</span><br><span class="line">				this.changeWeather = this.changeWeather.bind(this)</span><br><span class="line">			&#125;</span><br><span class="line">			//render调用几次？ ———— 1+n次 1是初始化的那次 n是状态更新的次数</span><br><span class="line">			render()&#123;</span><br><span class="line">				console.log(&apos;render&apos;);</span><br><span class="line">				//读取状态</span><br><span class="line">				const &#123;isHot,wind&#125; = this.state</span><br><span class="line">				return &lt;h1 onClick=&#123;this.changeWeather&#125;&gt;今天天气很&#123;isHot ? &apos;炎热&apos; : &apos;凉爽&apos;&#125;，&#123;wind&#125;&lt;/h1&gt;</span><br><span class="line">			&#125;</span><br><span class="line">			//changeWeather调用几次？ ———— 点几次调几次</span><br><span class="line">			changeWeather()&#123;</span><br><span class="line">				//changeWeather放在哪里？ ———— Weather的原型对象上，供实例使用</span><br><span class="line">				//由于changeWeather是作为onClick的回调，所以不是通过实例调用的，是直接调用</span><br><span class="line">				//类中的方法默认开启了局部的严格模式，所以changeWeather中的this为undefined</span><br><span class="line">				console.log(&apos;changeWeather&apos;);</span><br><span class="line">				//获取原来的isHot值</span><br><span class="line">				const isHot = this.state.isHot</span><br><span class="line">				//严重注意：状态必须通过setState进行更新,且更新是一种合并，不是替换。</span><br><span class="line">				this.setState(&#123;isHot:!isHot&#125;)</span><br><span class="line">				console.log(this);</span><br><span class="line"></span><br><span class="line">				//严重注意：状态(state)不可直接更改，下面这行就是直接更改！！！</span><br><span class="line">				//this.state.isHot = !isHot //这是错误的写法</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		//2.渲染组件到页面</span><br><span class="line">		ReactDOM.render(&lt;Weather/&gt;,document.getElementById(&apos;test&apos;))</span><br></pre></td></tr></table></figure>
<p>简写方式:赋值语句的形式+箭头函数</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建组件</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Weather</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">	<span class="comment">//初始化状态</span></span><br><span class="line">	state = &#123;<span class="attr">isHot</span>:<span class="literal">false</span>,<span class="attr">wind</span>:<span class="string">'微风'</span>&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">const</span> &#123;isHot,wind&#125; = <span class="keyword">this</span>.state</span><br><span class="line">		<span class="keyword">return</span> &lt;h1 onClick=&#123;this.changeWeather&#125;&gt;今天天气很&#123;isHot ? '炎热' : '凉爽'&#125;，&#123;wind&#125;&lt;/h1&gt;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//自定义方法————要用赋值语句的形式+箭头函数</span></span><br><span class="line">	changeWeather = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">		<span class="keyword">const</span> isHot = <span class="keyword">this</span>.state.isHot</span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;<span class="attr">isHot</span>:!isHot&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.渲染组件到页面</span></span><br><span class="line">ReactDOM.render(&lt;Weather/&gt;,<span class="built_in">document</span>.getElementById(<span class="string">'test'</span>))</span><br></pre></td></tr></table></figure>
<h3 id="组件三大属性-props"><a href="#组件三大属性-props" class="headerlink" title="组件三大属性 props"></a>组件三大属性 props</h3><p>①理解</p>
<blockquote>
<ol>
<li>每个组件对象都会有props(properties的简写)属性</li>
<li>组件标签的所有属性都保存在props中</li>
</ol>
</blockquote>
<p>② 作用</p>
<blockquote>
<ol>
<li>通过标签属性从组件外向组件内传递变化的数据</li>
<li>注意:组件内部不要修改props数据</li>
</ol>
</blockquote>
<p>代码示例:</p>
<p>类组件使用props</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建组件</span></span><br><span class="line">		<span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">			render()&#123;</span><br><span class="line">				<span class="comment">// console.log(this);</span></span><br><span class="line">				<span class="keyword">const</span> &#123;name,age,sex&#125; = <span class="keyword">this</span>.props</span><br><span class="line">				<span class="keyword">return</span> (</span><br><span class="line">					&lt;ul&gt;</span><br><span class="line">						&lt;li&gt;姓名：&#123;name&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">						&lt;li&gt;性别：&#123;sex&#125;&lt;/</span>li&gt;</span><br><span class="line">						&lt;li&gt;年龄：&#123;age+<span class="number">1</span>&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">					&lt;/u</span>l&gt;</span><br><span class="line">				)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//渲染组件到页面</span></span><br><span class="line">		ReactDOM.render(&lt;Person name="jerry" age=&#123;19&#125;  sex="男"/&gt;,<span class="built_in">document</span>.getElementById(<span class="string">'test1'</span>))</span><br><span class="line">		ReactDOM.render(&lt;Person name="tom" age=&#123;18&#125; sex="女"/&gt;,<span class="built_in">document</span>.getElementById(<span class="string">'test2'</span>))</span><br><span class="line">		<span class="keyword">const</span> p = &#123;<span class="attr">name</span>:<span class="string">'老刘'</span>,<span class="attr">age</span>:<span class="number">18</span>,<span class="attr">sex</span>:<span class="string">'女'</span>&#125;</span><br><span class="line">		<span class="comment">// console.log('@',...p);</span></span><br><span class="line">		<span class="comment">// ReactDOM.render(&lt;Person name=&#123;p.name&#125; age=&#123;p.age&#125; sex=&#123;p.sex&#125;/&gt;,document.getElementById('test3'))</span></span><br><span class="line">        <span class="comment">//此处使用赋值解构方式,使得代码更简洁</span></span><br><span class="line">		ReactDOM.render(&lt;Person &#123;...p&#125;/&gt;,<span class="built_in">document</span>.getElementById(<span class="string">'test3'</span>))</span><br></pre></td></tr></table></figure>
<p>函数组件使用props</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建组件</span></span><br><span class="line">		<span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">props</span>)</span>&#123;</span><br><span class="line">			<span class="keyword">const</span> &#123;name,age,sex&#125; = props</span><br><span class="line">			<span class="keyword">return</span> (</span><br><span class="line">					&lt;ul&gt;</span><br><span class="line">						&lt;li&gt;姓名：&#123;name&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">						&lt;li&gt;性别：&#123;sex&#125;&lt;/</span>li&gt;</span><br><span class="line">						&lt;li&gt;年龄：&#123;age&#125;&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">					&lt;/u</span>l&gt;</span><br><span class="line">				)</span><br><span class="line">		&#125;</span><br><span class="line"><span class="comment">//此处限制可以换成typrScript</span></span><br><span class="line">		Person.propTypes = &#123;</span><br><span class="line">			name:PropTypes.string.isRequired, <span class="comment">//限制name必传，且为字符串</span></span><br><span class="line">			sex:PropTypes.string,<span class="comment">//限制sex为字符串</span></span><br><span class="line">			age:PropTypes.number,<span class="comment">//限制age为数值</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//指定默认标签属性值</span></span><br><span class="line">		Person.defaultProps = &#123;</span><br><span class="line">			sex:<span class="string">'男'</span>,<span class="comment">//sex默认值为男</span></span><br><span class="line">			age:<span class="number">18</span> <span class="comment">//age默认值为18</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//渲染组件到页面</span></span><br><span class="line">		ReactDOM.render(&lt;Person name="jerry"/&gt;,<span class="built_in">document</span>.getElementById(<span class="string">'test1'</span>))</span><br></pre></td></tr></table></figure>
<h3 id="组件三大属性-refs"><a href="#组件三大属性-refs" class="headerlink" title="组件三大属性 refs"></a>组件三大属性 refs</h3><p>①理解</p>
<blockquote>
<p>组件内的标签可以定义ref来标识自己</p>
</blockquote>
<p>代码示例:</p>
<p>字符串形式的ref(<code>不推荐,将被淘汰</code>)</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//展示左侧输入框的数据</span></span><br><span class="line">	showData = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">		<span class="keyword">const</span> &#123;input1&#125; = <span class="keyword">this</span>.refs</span><br><span class="line">		alert(input1.value)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//展示右侧输入框的数据</span></span><br><span class="line">	showData2 = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">		<span class="keyword">const</span> &#123;input2&#125; = <span class="keyword">this</span>.refs</span><br><span class="line">		alert(input2.value)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">return</span>(</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				&lt;input ref=<span class="string">"input1"</span> type=<span class="string">"text"</span> placeholder=<span class="string">"点击按钮提示数据"</span>/&gt;&amp;nbsp;</span><br><span class="line">				&lt;button onClick=&#123;<span class="keyword">this</span>.showData&#125;&gt;点我提示左侧的数据&lt;<span class="regexp">/button&gt;&amp;nbsp;</span></span><br><span class="line"><span class="regexp">				&lt;input ref="input2" onBlur=&#123;this.showData2&#125; type="text" placeholder="失去焦点提示数据"/</span>&gt;</span><br><span class="line">			&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">		)</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>回调形式的ref</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**下面的this指的是组件实例,我直接this.input1 = c 意思是给实例上的input1赋值,之后直接通过调用打印得到*/</span></span><br><span class="line"><span class="comment">//展示左侧输入框的数据</span></span><br><span class="line">	showData = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">		<span class="keyword">const</span> &#123;input1&#125; = <span class="keyword">this</span></span><br><span class="line">		alert(input1.value)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//展示右侧输入框的数据</span></span><br><span class="line">	showData2 = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">		<span class="keyword">const</span> &#123;input2&#125; = <span class="keyword">this</span></span><br><span class="line">		alert(input2.value)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">return</span>(</span><br><span class="line">			&lt;div&gt;</span><br><span class="line">				&lt;input ref=&#123;c =&gt; <span class="keyword">this</span>.input1 = c &#125; type=<span class="string">"text"</span> placeholder=<span class="string">"点击按钮提示数据"</span>/&gt;&amp;nbsp;</span><br><span class="line">				&lt;button onClick=&#123;<span class="keyword">this</span>.showData&#125;&gt;点我提示左侧的数据&lt;<span class="regexp">/button&gt;&amp;nbsp;</span></span><br><span class="line"><span class="regexp">				&lt;input onBlur=&#123;this.showData2&#125; ref=&#123;c =&gt; this.input2 = c &#125; type="text" placeholder="失去焦点提示数据"/</span>&gt;&amp;nbsp;</span><br><span class="line">			&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">		)</span></span><br><span class="line"><span class="regexp">	&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>createRef创建ref容器<code>最推荐的</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*React.createRef调用后可以返回一个容器，该容器可以存储被ref所标识的节点,该容器是“专人专用”的*/</span></span><br><span class="line">myRef = React.createRef()</span><br><span class="line">myRef2 = React.createRef()</span><br><span class="line"><span class="comment">//展示左侧输入框的数据</span></span><br><span class="line">showData = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">	alert(<span class="keyword">this</span>.myRef.current.value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//展示右侧输入框的数据</span></span><br><span class="line">showData2 = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">	alert(<span class="keyword">this</span>.myRef2.current.value);</span><br><span class="line">&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">			&lt;input ref=&#123;<span class="keyword">this</span>.myRef&#125; type=<span class="string">"text"</span> placeholder=<span class="string">"点击按钮提示数据"</span>/&gt;&amp;nbsp;</span><br><span class="line">			&lt;button onClick=&#123;<span class="keyword">this</span>.showData&#125;&gt;点我提示左侧的数据&lt;<span class="regexp">/button&gt;&amp;nbsp;</span></span><br><span class="line"><span class="regexp">			&lt;input onBlur=&#123;this.showData2&#125; ref=&#123;this.myRef2&#125; type="text" placeholder="失去焦点提示数据"/</span>&gt;&amp;nbsp;</span><br><span class="line">		&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">	)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="事件处理与收集表单数据"><a href="#事件处理与收集表单数据" class="headerlink" title="事件处理与收集表单数据"></a>事件处理与收集表单数据</h3><p><strong>事件处理</strong></p>
<blockquote>
<ol>
<li>通过onXxx属性指定事件处理函数(注意大小写)</li>
</ol>
<p>a)React使用的是自定义(合成事件,而不是使用的原生DOM事件) —-为了更好的兼容性</p>
<p>b)React中的事件是通过事件委托的方式处理的(委托给组件最外层的元素)—-为了更高效</p>
<ol start="2">
<li>通过event.target得到发生事件的DOM元素对象 —–不要过度使用ref</li>
</ol>
</blockquote>
<p><strong>Ⅱ-表单组件的分类</strong></p>
<blockquote>
<p>就形式上来说，<strong><code>受控组件</code>就是为某个form表单组件添加<code>value</code>属性；<code>非受控组件</code>就是没有添加<code>value</code>属性的组件</strong></p>
</blockquote>
<p>1、受控组件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">state = &#123;<span class="comment">//初始化状态</span></span><br><span class="line">	username:<span class="string">''</span>, <span class="comment">//用户名</span></span><br><span class="line">	password:<span class="string">''</span> <span class="comment">//密码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//保存用户名到状态中</span></span><br><span class="line">saveUsername = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.setState(&#123;<span class="attr">username</span>:event.target.value&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//保存密码到状态中</span></span><br><span class="line">savePassword = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.setState(&#123;<span class="attr">password</span>:event.target.value&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//表单提交的回调</span></span><br><span class="line">handleSubmit = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">	event.preventDefault() <span class="comment">//阻止表单提交</span></span><br><span class="line">	<span class="keyword">const</span> &#123;username,password&#125; = <span class="keyword">this</span>.state</span><br><span class="line">	alert(<span class="string">`你输入的用户名是：<span class="subst">$&#123;username&#125;</span>,你输入的密码是：<span class="subst">$&#123;password&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()&#123;</span><br><span class="line">	<span class="keyword">return</span>(</span><br><span class="line">		&lt;form onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;</span><br><span class="line">			用户名：&lt;input onChange=&#123;<span class="keyword">this</span>.saveUsername&#125; type=<span class="string">"text"</span> name=<span class="string">"username"</span>/&gt;</span><br><span class="line">			密码：&lt;input onChange=&#123;<span class="keyword">this</span>.savePassword&#125; type=<span class="string">"password"</span> name=<span class="string">"password"</span>/&gt;</span><br><span class="line">			&lt;button&gt;登录&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">		&lt;/</span>form&gt;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2、非受控组件</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">handleSubmit = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</span><br><span class="line">		event.preventDefault() <span class="comment">//阻止表单提交</span></span><br><span class="line">		<span class="keyword">const</span> &#123;username,password&#125; = <span class="keyword">this</span></span><br><span class="line">		alert(<span class="string">`你输入的用户名是：<span class="subst">$&#123;username.value&#125;</span>,你输入的密码是：<span class="subst">$&#123;password.value&#125;</span>`</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	render()&#123;</span><br><span class="line">		<span class="keyword">return</span>(</span><br><span class="line">			&lt;form onSubmit=&#123;<span class="keyword">this</span>.handleSubmit&#125;&gt;</span><br><span class="line">				用户名：&lt;input ref=&#123;c =&gt; <span class="keyword">this</span>.username = c&#125; type=<span class="string">"text"</span> name=<span class="string">"username"</span>/&gt;</span><br><span class="line">				密码：&lt;input ref=&#123;c =&gt; <span class="keyword">this</span>.password = c&#125; type=<span class="string">"password"</span> name=<span class="string">"password"</span>/&gt;</span><br><span class="line">				&lt;button&gt;登录&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>form&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="高阶函数与函数柯里化"><a href="#高阶函数与函数柯里化" class="headerlink" title="高阶函数与函数柯里化"></a>高阶函数与函数柯里化</h3><p><strong>高阶函数:</strong></p>
<blockquote>
<p>如果一个函数符合下面两个规范中的任何一个,那该函数就是高阶函数</p>
<ol>
<li>若A函数,接受的参数是一个函数,那么A就可以称之为高阶函数</li>
<li>若A函数,调用的返回值依然是一个函数,那么A就可以称之为高阶函数</li>
</ol>
<p>常见的高阶函数有:Promise、setTimeout、arr.map()等等 </p>
</blockquote>
<p> <strong>函数的柯里化</strong></p>
<blockquote>
<p>通过函数调用继续返回函数的方式,实现对此接受参数最后统一处理的函数编码形式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a</span>)</span>&#123; <span class="keyword">return</span> <span class="function">(<span class="params">b</span>)=&gt;</span>&#123;<span class="keyword">return</span> <span class="function"><span class="params">c</span>=&gt;</span>&#123; <span class="keyword">return</span> a+b+c&#125; &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>不用函数柯里化实现事件的绑定</strong></p>
<blockquote>
<p>直接使用回调函数,因为他本身就是以一个函数为返回值</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;input onChange=&#123;event =&gt; this.saveFormData('username',event) &#125; type="text" name="username"/&gt;</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><blockquote>
<ol>
<li>组件从创建到死亡它会经历一些特定的阶段</li>
<li>React组件中包含一系列钩子函数(生命周期回调函数),会在特定的时刻调用</li>
<li>我们在定义组件时,会在特定的生命周期回调函数中,做特定的工作</li>
</ol>
</blockquote>
<h3 id="旧生命周期-react16前"><a href="#旧生命周期-react16前" class="headerlink" title="旧生命周期 react16前"></a><strong>旧生命周期 react16前</strong></h3><p>各生命周期钩子调用顺序</p>
<ol>
<li><p>初始化阶段：ReactDOM.render()触发—————————初次渲染</p>
<p>​                        constructor()</p>
<p>​                        compinentWillMount()</p>
<p>​                        render()</p>
<p>​                        componentDidMount =&gt;常用 组件将要渲染   一般在这个钩子中做一些初始化的事情，如开启定时器、发送网络请求、订阅消息等</p>
</li>
</ol>
<p>2.更新阶段：由组件内部的this.setState()或者父组件render触发</p>
<p>​                               shouldComponentUpdate()组件应该更新</p>
<p>​                                componentWillUpdate()组件将要更新</p>
<p>​                                render()</p>
<p>​                                componentDidUpdate()组件更新</p>
<p>3.卸载阶段</p>
<p>​                                由ReactDOM.unmountComponentAtNode（卸载节点上的组件）触发</p>
<p>​                                componentWillUnmount()常用 组件将要卸载 一般在这个钩子中做一些收尾的事情 关闭定时器、取消订阅等。</p>
<h3 id="生命周期新"><a href="#生命周期新" class="headerlink" title="生命周期新"></a><strong>生命周期新</strong></h3><p>1、初始化阶段 ：ReactDOM.render()触发—————————初次渲染</p>
<p>​                                constructor()</p>
<p>​                                getDerivedStateFromProps() 从props获得派生状态</p>
<p>​                                render()</p>
<p>​                                componentDidMount()    常用</p>
<p>2、更新阶段   由组件内部的this.setState()或者父组件的render触发</p>
<p>​                                getDerivedStateFromProps()  从Props获得派生状态</p>
<p>​                                shouldComponentUpdate() 组件应该更新</p>
<p>​                                render()</p>
<p>​                                getSnapshotBeforeUpdate() 在更新前获得快照</p>
<p>​                                componentDidUpdate()</p>
<p>3、卸载组件:由ReactDOM.unmountComponentAtNode()触发</p>
<p>​                                componentWillUnmount() ===&gt;<code>常用</code> 一般在这个钩子中做一些收尾的事情,如:关闭定时器、取消订阅消息</p>
<h3 id="重要的钩子"><a href="#重要的钩子" class="headerlink" title="重要的钩子"></a>重要的钩子</h3><blockquote>
<ol>
<li>render:初始化渲染或者更新渲染调用</li>
<li>componentDidMount() :开启监听,发送ajax请求</li>
<li>componentWillUnmount(): 做一些收尾工作,如:清理定时器</li>
</ol>
</blockquote>
<h3 id="即将废弃的钩子"><a href="#即将废弃的钩子" class="headerlink" title="即将废弃的钩子"></a>即将废弃的钩子</h3><blockquote>
<ol>
<li>componentWillMount</li>
<li>componentWillReceiveProps</li>
<li>componentWillUpdate</li>
</ol>
<p><code>ps</code>:现在使用会出现警告,之后版本可能需要加上UNSAFE_前缀才能使用,以后可能会被彻底废弃,不建议使用</p>
<p>推测React团队认为提高使用成本将会间接影响我们,让我们去适应新的钩子,所以加上这个</p>
</blockquote>
<h2 id="react中的key"><a href="#react中的key" class="headerlink" title="react中的key"></a>react中的key</h2><blockquote>
<p>经典面试题:</p>
<p>1). react/vue中的key有什么作用？（key的内部原理是什么？）</p>
<p>2). 为什么遍历列表时，key最好不要用index?</p>
</blockquote>
<p> <strong>虚拟DOM中key的作用</strong></p>
<blockquote>
<ol>
<li><p>简单的说:key是虚拟DOM对象的标识,在更新显示时key起着极其重要的作用</p>
</li>
<li><p>详细的说:当状态当中的数据发生变化时,react会根据<code>新数据</code>生成<code>新的虚拟DOM</code>,随后React进行<code>新虚拟DOM</code>与<code>旧虚拟DOM</code>的diff比较,比较规则如下:</p>
<ol start="3">
<li>旧虚拟DOM中找到了与新虚拟DOM相同的key：</li>
</ol>
<p>a)若虚拟DOM中内容没变,直接使用之前的真实DOM</p>
<p>b)若虚拟DON中的内容变了,则生成新的真实DOM,随后替换掉页面中之前的真实DOM</p>
<ol start="4">
<li>旧虚拟DOM中未找到与新虚拟DOM相同的key</li>
</ol>
<p>根据数据创建新的真实DOM,随后渲染到页面</p>
</li>
</ol>
</blockquote>
<p><strong>用index作为key可能会引发的问题</strong></p>
<blockquote>
<ol>
<li>若对数据进行:逆序添加,逆序删除等破坏顺序操作:</li>
</ol>
<p>会产生没有必要的真实DOM更新 ==&gt;界面效果没问题,但是效率低</p>
<ol start="2">
<li>如果结构中还包含输入类的DOM:</li>
</ol>
<p>会产生错误DOM更新 ===&gt;界面有问题</p>
<ol start="3">
<li>注意:</li>
</ol>
<p>如果不存在对数据的逆序添加、逆序删除等破坏顺序操作,仅用于渲染列表用于展示,使用index作为key是没有问题的</p>
</blockquote>
<p><strong>开发中如何选择key?</strong></p>
<blockquote>
<ol>
<li>最好使用每条数据的唯一标识作为key,比如id,手机号,身份证号,学号等</li>
<li>如果确定只是简单的展示诗句,用index也是可以的</li>
</ol>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//慢动作回放----使用index索引值作为key</span></span><br><span class="line">		初始数据：</span><br><span class="line">				&#123;id:1,name:'小张',age:18&#125;,</span><br><span class="line">				&#123;id:2,name:'小李',age:19&#125;,</span><br><span class="line">		初始的虚拟DOM：</span><br><span class="line">				&lt;li key=0&gt;小张---18&lt;input type="text"/&gt;&lt;/li&gt;</span><br><span class="line">				&lt;li key=1&gt;小李---19&lt;input type="text"/&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">		更新后的数据：</span><br><span class="line">				&#123;id:3,name:'小王',age:20&#125;,</span><br><span class="line">				&#123;id:1,name:'小张',age:18&#125;,</span><br><span class="line">				&#123;id:2,name:'小李',age:19&#125;,</span><br><span class="line">		更新数据后的虚拟DOM：</span><br><span class="line">				&lt;li key=0&gt;小王---20&lt;input type="text"/&gt;&lt;/li&gt;</span><br><span class="line">				&lt;li key=1&gt;小张---18&lt;input type="text"/&gt;&lt;/li&gt;</span><br><span class="line">				&lt;li key=2&gt;小李---19&lt;input type="text"/&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">-----------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">//慢动作回放----使用id唯一标识作为key</span></span><br><span class="line"></span><br><span class="line">		初始数据：</span><br><span class="line">				&#123;id:1,name:'小张',age:18&#125;,</span><br><span class="line">				&#123;id:2,name:'小李',age:19&#125;,</span><br><span class="line">		初始的虚拟DOM：</span><br><span class="line">				&lt;li key=1&gt;小张---18&lt;input type="text"/&gt;&lt;/li&gt;</span><br><span class="line">				&lt;li key=2&gt;小李---19&lt;input type="text"/&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">		更新后的数据：</span><br><span class="line">				&#123;id:3,name:'小王',age:20&#125;,</span><br><span class="line">				&#123;id:1,name:'小张',age:18&#125;,</span><br><span class="line">				&#123;id:2,name:'小李',age:19&#125;,</span><br><span class="line">		更新数据后的虚拟DOM：</span><br><span class="line">				&lt;li key=3&gt;小王---20&lt;input type="text"/&gt;&lt;/li&gt;</span><br><span class="line">				&lt;li key=1&gt;小张---18&lt;input type="text"/&gt;&lt;/li&gt;</span><br><span class="line">				&lt;li key=2&gt;小李---19&lt;input type="text"/&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>
<h2 id="React脚手架"><a href="#React脚手架" class="headerlink" title="React脚手架"></a>React脚手架</h2><blockquote>
<ol>
<li><p>xxx脚手架:用来帮助程序原快速创建一个基于xxx库的模板项目</p>
<p>   a) 包含了所有需要的配置(语法检查,jsx编 译,devServer…)</p>
<pre><code>b)下载好了所有相关的依赖
</code></pre></li>
</ol>
<p>​      c) 可以直接运行一个简单效果</p>
<ol start="2">
<li><p>react提供了一个用于创建react项目的脚手架库:create-react-app</p>
</li>
<li><p>项目的整体技术架构为:react+webpack+es6+eslint</p>
</li>
<li><p>使用脚手架开发的项目的特点:模块化,组件化,工程化</p>
</li>
</ol>
</blockquote>
<p><strong>创建项目并启动</strong></p>
<blockquote>
<ol>
<li><p>全局安装:<code>npm i -g create-react-app</code></p>
</li>
<li><p>切换到想创建项目的目录,使用命令:<code>create-react-arr hello-react</code></p>
</li>
<li>进入项目文件夹</li>
<li>启动项目:<code>npm start</code></li>
</ol>
</blockquote>
<p><strong>react脚手架项目结构</strong></p>
<blockquote>
<p>public —- 静态资源文件夹</p>
<p>​            favicon.icon —— 网站页签图标</p>
<p>​            <strong>index.html ——–</strong> <strong>主页面</strong></p>
<p>​            logo192.png ——- logo图</p>
<p>​            logo512.png ——- logo图</p>
<p>​            manifest.json —– 应用加壳的配置文件</p>
<p>​            robots.txt ——– 爬虫协议文件</p>
<p>src —- 源码文件夹</p>
<p>​            App.css ——– App组件的样式</p>
<p>​            <strong>App.js ——— App**</strong>组件**</p>
<p>​            App.test.js —- 用于给App做测试</p>
<p>​            index.css —— 样式</p>
<p>​            <strong>index.js ——-</strong> <strong>入口文件</strong></p>
<p>​            logo.svg ——- logo图</p>
<p>​            reportWebVitals.js</p>
<p>​                    — 页面性能分析文件(需要web-vitals库的支持)</p>
<p>​            setupTests.js</p>
<p>​                    —- 组件单元测试的文件(需要jest-dom库的支持)</p>
</blockquote>
<p><strong>功能界面的组件化编码流程</strong></p>
<blockquote>
<ol>
<li><p>拆分组件: 拆分界面,抽取组件</p>
</li>
<li><p>实现静态组件: 使用组件实现静态页面效果</p>
</li>
<li><p>实现动态组件</p>
</li>
</ol>
<p>​    3.1 动态显示初始化数据</p>
<p>​        3.1.1 数据类型</p>
<p>​        3.1.2 数据名称</p>
<p>​        3.1.2 保存在哪个组件?</p>
<p>​    3.2 交互(从绑定事件监听开始)</p>
</blockquote>
<p><strong>TodoList部分代码</strong></p>
<blockquote>
<p>1、更新时可以利用赋值解构后再传入重复字段会自动覆盖的方式进行更新数据</p>
<p>​    –&gt;if(todoObj.id === id) return <code>{...todoObj,done}</code></p>
<p>2、数组批量删除可以用filter过滤实现</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//updateTodo用于更新一个todo对象</span></span><br><span class="line">updateTodo = <span class="function">(<span class="params">id,done</span>)=&gt;</span>&#123;</span><br><span class="line">		<span class="comment">//获取状态中的todos</span></span><br><span class="line">		<span class="keyword">const</span> &#123;todos&#125; = <span class="keyword">this</span>.state</span><br><span class="line">		<span class="comment">//匹配处理数据</span></span><br><span class="line">		<span class="keyword">const</span> newTodos = todos.map(<span class="function">(<span class="params">todoObj</span>)=&gt;</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(todoObj.id === id) <span class="keyword">return</span> &#123;...todoObj,done&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">return</span> todoObj</span><br><span class="line">		&#125;)</span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;<span class="attr">todos</span>:newTodos&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//deleteTodo用于删除一个todo对象</span></span><br><span class="line">	deleteTodo = <span class="function">(<span class="params">id</span>)=&gt;</span>&#123;</span><br><span class="line">		<span class="comment">//获取原来的todos</span></span><br><span class="line">		<span class="keyword">const</span> &#123;todos&#125; = <span class="keyword">this</span>.state</span><br><span class="line">		<span class="comment">//删除指定id的todo对象</span></span><br><span class="line">		<span class="keyword">const</span> newTodos = todos.filter(<span class="function">(<span class="params">todoObj</span>)=&gt;</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> todoObj.id !== id</span><br><span class="line">		&#125;)</span><br><span class="line">		<span class="comment">//更新状态</span></span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;<span class="attr">todos</span>:newTodos&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//checkAllTodo用于全选</span></span><br><span class="line">	checkAllTodo = <span class="function">(<span class="params">done</span>)=&gt;</span>&#123;</span><br><span class="line">		<span class="comment">//获取原来的todos</span></span><br><span class="line">		<span class="keyword">const</span> &#123;todos&#125; = <span class="keyword">this</span>.state</span><br><span class="line">		<span class="comment">//加工数据</span></span><br><span class="line">		<span class="keyword">const</span> newTodos = todos.map(<span class="function">(<span class="params">todoObj</span>)=&gt;</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;...todoObj,done&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		<span class="comment">//更新状态</span></span><br><span class="line">		<span class="keyword">this</span>.setState(&#123;<span class="attr">todos</span>:newTodos&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="React-ajax"><a href="#React-ajax" class="headerlink" title="React ajax"></a>React ajax</h2><h3 id="React中配置代理-proxy"><a href="#React中配置代理-proxy" class="headerlink" title="React中配置代理(proxy)"></a>React中配置代理(<code>proxy</code>)</h3><p>方法一：<code>简单代理</code>:在package.json中追加如下配置 :<code>&quot;proxy&quot;:http://localhost:5000</code></p>
<ul>
<li>ps:当你请求<code>http://localhost:5000</code>产生跨域(本身在3000端口)时,添加此代码, 之后你请求时用<code>http://localhost:3000</code>进行请求,当其在<code>3000</code>端口中找不到资源时将会自动转发至<code>5000</code>端口进行请求,不产生跨域问题</li>
<li>优点：配置简单，前端请求资源时可以不加任何前缀。</li>
<li>缺点：不能配置多个代理</li>
<li>工作方式：上述方式配置代理，当请求了3000不存在的资源时，那么该请求会转发给5000 （优先匹配前端资源）</li>
</ul>
<p>方法二：在src下创建配置文件：<code>src/setupProxy.js</code></p>
<ul>
<li>ps:必须是这个文件名,react项目运行的时候会自动查找这个文件,并将其加入webpack的配置中,所以当你修改此文件后,你需要重新启动项目</li>
<li>优点：可以配置多个代理，可以灵活的控制请求是否走代理。</li>
<li>缺点：配置繁琐，前端请求资源时必须加前缀。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代码示例</span></span><br><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">'http-proxy-middleware'</span>)</span><br><span class="line"> <span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">app</span>) </span>&#123;</span><br><span class="line">   app.use(</span><br><span class="line">     proxy(<span class="string">'/api1'</span>, &#123;  <span class="comment">//api1是需要转发的请求(所有带有/api1前缀的请求都会转发给5000)</span></span><br><span class="line">       target: <span class="string">'http://localhost:5000'</span>, <span class="comment">//配置转发目标地址(能返回数据的服务器地址)</span></span><br><span class="line">       changeOrigin: <span class="literal">true</span>, <span class="comment">//控制服务器接收到的请求头中host字段的值</span></span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">       	changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000</span></span><br><span class="line"><span class="comment">       	changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:3000</span></span><br><span class="line"><span class="comment">       	changeOrigin默认值为false，但我们一般将changeOrigin值设为true</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">       pathRewrite: &#123;<span class="string">'^/api1'</span>: <span class="string">''</span>&#125; <span class="comment">//去除请求前缀，保证交给后台服务器的是正常请求地址(必须配置)</span></span><br><span class="line">     &#125;),</span><br><span class="line">     proxy(<span class="string">'/api2'</span>, &#123; </span><br><span class="line">       target: <span class="string">'http://localhost:5001'</span>,</span><br><span class="line">       changeOrigin: <span class="literal">true</span>,</span><br><span class="line">       pathRewrite: &#123;<span class="string">'^/api2'</span>: <span class="string">''</span>&#125;</span><br><span class="line">     &#125;)</span><br><span class="line">   )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="补充知识点-消息订阅与发布机制等"><a href="#补充知识点-消息订阅与发布机制等" class="headerlink" title="补充知识点 消息订阅与发布机制等"></a>补充知识点 消息订阅与发布机制等</h3><p><strong>连续赋值解构+重命名</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:<span class="number">1</span>&#125;&#125;</span><br><span class="line"><span class="keyword">const</span> &#123;a&#125; = obj; <span class="comment">//传统解构赋值</span></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">a</span>:&#123;b&#125;&#125; = obj; <span class="comment">//连续解构赋值</span></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:value&#125;&#125; = obj; <span class="comment">//连续解构赋值+重命名</span></span><br></pre></td></tr></table></figure>
<p><strong>消息订阅与发布机制 —&gt;  工具库: PubSubJS</strong></p>
<blockquote>
<p>1.先订阅，再发布（理解：有一种隔空对话的感觉）</p>
<p>2.适用于任意组件间通信</p>
<p>3.要在组件的componentWillUnmount中取消订阅</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下载: npm install pubsub-js --save</span></span><br><span class="line"><span class="comment">//使用举例</span></span><br><span class="line"><span class="number">1</span>)	<span class="keyword">import</span> PubSub <span class="keyword">from</span> <span class="string">'pubsub-js'</span> <span class="comment">//引入</span></span><br><span class="line"><span class="number">2</span>)	PubSub.subscribe(<span class="string">'delete'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123; &#125;); <span class="comment">//订阅</span></span><br><span class="line"><span class="number">3</span>)	PubSub.publish(<span class="string">'delete'</span>, data) <span class="comment">//发布消息</span></span><br><span class="line"><span class="comment">//*------------------------------使用----------------------------------------------------</span></span><br><span class="line">	componentDidMount()&#123;</span><br><span class="line">		<span class="keyword">this</span>.token = PubSub.subscribe(<span class="string">'atguigu'</span>,(_,stateObj)=&gt;&#123;</span><br><span class="line">			<span class="keyword">this</span>.setState(stateObj)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	componentWillUnmount()&#123;</span><br><span class="line">		PubSub.unsubscribe(<span class="keyword">this</span>.token)</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">//----------------------------------使用---------------------------------------------------</span></span><br><span class="line">		<span class="comment">//发送请求前通知List更新状态</span></span><br><span class="line">		PubSub.publish(<span class="string">'atguigu'</span>,&#123;<span class="attr">isFirst</span>:<span class="literal">false</span>,<span class="attr">isLoading</span>:<span class="literal">true</span>&#125;)</span><br><span class="line">		<span class="comment">//发送网络请求---使用fetch发送（优化）</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="keyword">const</span> response= <span class="keyword">await</span> fetch(<span class="string">`/api1/search/users2?q=<span class="subst">$&#123;keyWord&#125;</span>`</span>)</span><br><span class="line">			<span class="keyword">const</span> data = <span class="keyword">await</span> response.json()</span><br><span class="line">			<span class="built_in">console</span>.log(data);</span><br><span class="line">			PubSub.publish(<span class="string">'atguigu'</span>,&#123;<span class="attr">isLoading</span>:<span class="literal">false</span>,<span class="attr">users</span>:data.items&#125;)</span><br><span class="line">		&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'请求出错'</span>,error);</span><br><span class="line">			PubSub.publish(<span class="string">'atguigu'</span>,&#123;<span class="attr">isLoading</span>:<span class="literal">false</span>,<span class="attr">err</span>:error.message&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p><strong>消息订阅与发布机制 —&gt;  工具库: mitt</strong></p>
<p>此方法用的是[<code>mitt</code>]实现,其实本质上就是注册一个全局变量进行监听 –&gt; <a href="https://github.com/developit/mitt" target="_blank" rel="noopener">mitt源码地址</a></p>
<p>可以自己实现,此处因为人家写的不错了,就以此作为例子</p>
<ol>
<li><p>安装或者直接复制使用</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save mitt</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用示例</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">-------------- 首先要定义一个公用全局变量  --------------------------</span><br><span class="line"> //文件 utils/index.ts</span><br><span class="line"> import mitt from &apos;./mitt&apos;;</span><br><span class="line"> //此处声明,将其变为全局变量</span><br><span class="line"> const eventBus = mitt();</span><br><span class="line"> export &#123; eventBus &#125;</span><br><span class="line"> ---------------- 发送值的组件(要修改别人的组件)  ---------------------</span><br><span class="line"> //导入共有变量</span><br><span class="line"> import &#123; eventBus &#125; from &apos;~/utils&apos;;</span><br><span class="line">   &lt;a</span><br><span class="line">   onClick=&#123;() =&gt; &#123;</span><br><span class="line"> 	//延迟发送是本人此之前有一个跳转动作,跳转到接收方组件</span><br><span class="line">     // 防止修改了值的时候但是接收组件未注册  正常情况直接发送即可     </span><br><span class="line">     //setTimeout(() =&gt; &#123;</span><br><span class="line">     // eventBus.emit(&apos;foo&apos;, data);</span><br><span class="line">     //&#125;, 100);</span><br><span class="line">     eventBus.emit(&apos;foo&apos;, data);    </span><br><span class="line">    &#125;&#125;</span><br><span class="line">   /&gt;;</span><br><span class="line"></span><br><span class="line"> ------------------ 接受方组件(接受发送方的组件)  -------------------------------------</span><br><span class="line"></span><br><span class="line"> const Search: FC&lt;IProps&gt; = (props) =&gt; &#123;</span><br><span class="line">   useEffect(() =&gt; &#123;</span><br><span class="line">     //替换为mitt写法,此时已经接收到了</span><br><span class="line">     eventBus.on(&apos;foo&apos;, (searchParams) =&gt; &#123;console.log(&apos;接受到值了&apos;,searchParams) &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">   &#125;, []);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>3.mitt源码</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> EventType = <span class="built_in">string</span> | symbol;</span><br><span class="line"></span><br><span class="line"><span class="comment">// An event handler can take an optional event argument</span></span><br><span class="line"><span class="comment">// and should not return a value</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> Handler&lt;T = unknown&gt; = <span class="function">(<span class="params">event: T</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> WildcardHandler&lt;T = Record&lt;<span class="built_in">string</span>, unknown&gt;&gt; = (</span><br><span class="line">  <span class="keyword">type</span>: keyof T,</span><br><span class="line">  event: T[keyof T]</span><br><span class="line">) =&gt; <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// An array of all currently registered event handlers for a type</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> EventHandlerList&lt;T = unknown&gt; = <span class="built_in">Array</span>&lt;Handler&lt;T&gt;&gt;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> WildCardEventHandlerList&lt;T = Record&lt;<span class="built_in">string</span>, unknown&gt;&gt; = <span class="built_in">Array</span>&lt;</span><br><span class="line">  WildcardHandler&lt;T&gt;</span><br><span class="line">&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A map of event types and their corresponding event handlers.</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> EventHandlerMap&lt;Events <span class="keyword">extends</span> Record&lt;EventType, unknown&gt;&gt; = Map&lt;</span><br><span class="line">  keyof Events | <span class="string">'*'</span>,</span><br><span class="line">  EventHandlerList&lt;Events[keyof Events]&gt; | WildCardEventHandlerList&lt;Events&gt;</span><br><span class="line">&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> Emitter&lt;Events <span class="keyword">extends</span> Record&lt;EventType, unknown&gt;&gt; &#123;</span><br><span class="line">  all: EventHandlerMap&lt;Events&gt;;</span><br><span class="line"></span><br><span class="line">  on: <span class="function">(<span class="params">&lt;Key <span class="keyword">extends</span> keyof Events&gt;(<span class="params"><span class="keyword">type</span>: Key, handler: Handler&lt;Events[Key]&gt;</span>) =&gt; <span class="built_in">void</span></span>) &amp; (<span class="params">(<span class="params"><span class="keyword">type</span>: '*', handler: WildcardHandler&lt;Events&gt;</span>) =&gt; <span class="built_in">void</span></span>);</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="params">off</span>: (<span class="params">&lt;Key <span class="keyword">extends</span> keyof Events&gt;(<span class="params"></span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="params">    <span class="keyword">type</span>: Key,</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="params">    handler?: Handler&lt;Events[Key]&gt;</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="params">  </span>) =&gt; <span class="built_in">void</span></span>) &amp; (<span class="params">(<span class="params"><span class="keyword">type</span>: '*', handler: WildcardHandler&lt;Events&gt;</span>) =&gt; <span class="built_in">void</span></span>);</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="params">emit</span>: (<span class="params">&lt;Key <span class="keyword">extends</span> keyof Events&gt;(<span class="params"><span class="keyword">type</span>: Key, event: Events[Key]</span>) =&gt; <span class="built_in">void</span></span>) &amp; (<span class="params">&lt;Key <span class="keyword">extends</span> keyof Events&gt;(<span class="params"></span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="params">    <span class="keyword">type</span>: <span class="literal">undefined</span> <span class="keyword">extends</span> Events[Key] ? Key : never</span></span></span></span><br><span class="line"><span class="function"><span class="params"><span class="params">  </span>) =&gt; <span class="built_in">void</span></span>);</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">/**</span></span><br><span class="line"><span class="function"> * <span class="params">Mitt</span>: <span class="params">Tiny</span> (<span class="params">~200b</span>) <span class="params">functional</span> <span class="params">event</span> <span class="params">emitter</span> / <span class="params">pubsub</span>.</span></span><br><span class="line"><span class="function"> * @<span class="params">name</span> <span class="params">mitt</span></span></span><br><span class="line"><span class="function"> * @<span class="params">returns</span> &#123;<span class="params">Mitt</span>&#125;</span></span><br><span class="line"><span class="function"> */</span></span><br><span class="line"><span class="function"><span class="params">export</span> <span class="params">default</span> <span class="params">function</span> <span class="params">mitt</span>&lt;<span class="params">Events</span> <span class="params">extends</span> <span class="params">Record</span>&lt;<span class="params">EventType</span>, <span class="params">unknown</span>&gt;&gt;(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  all?: EventHandlerMap&lt;Events&gt;</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="params">Emitter</span>&lt;<span class="params">Events</span>&gt; &#123;</span></span><br><span class="line"><span class="function">  <span class="params">type</span> <span class="params">GenericEventHandler</span> =</span></span><br><span class="line"><span class="function">    | <span class="params">Handler</span>&lt;<span class="params">Events</span>[<span class="params">keyof</span> <span class="params">Events</span>]&gt;</span></span><br><span class="line"><span class="function">    | <span class="params">WildcardHandler</span>&lt;<span class="params">Events</span>&gt;;</span></span><br><span class="line"><span class="function">  <span class="params">all</span> = <span class="params">all</span> || <span class="params">new</span> <span class="params">Map</span><span class="params">()</span>;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="params">return</span> &#123;</span></span><br><span class="line"><span class="function">    /**</span></span><br><span class="line"><span class="function">     * <span class="params">A</span> <span class="params">Map</span> <span class="params">of</span> <span class="params">event</span> <span class="params">names</span> <span class="params">to</span> <span class="params">registered</span> <span class="params">handler</span> <span class="params">functions</span>.</span></span><br><span class="line"><span class="function">     */</span></span><br><span class="line"><span class="function">    <span class="params">all</span>,</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    /**</span></span><br><span class="line"><span class="function">     * <span class="params">Register</span> <span class="params">an</span> <span class="params">event</span> <span class="params">handler</span> <span class="params">for</span> <span class="params">the</span> <span class="params">given</span> <span class="params">type</span>.</span></span><br><span class="line"><span class="function">     * @<span class="params">param</span> &#123;<span class="params">string</span>|<span class="params">symbol</span>&#125; <span class="params">type</span> <span class="params">Type</span> <span class="params">of</span> <span class="params">event</span> <span class="params">to</span> <span class="params">listen</span> <span class="params">for</span>, <span class="params">or</span> `'*'` <span class="params">for</span> <span class="params">all</span> <span class="params">events</span></span></span><br><span class="line"><span class="function">     * @<span class="params">param</span> &#123;<span class="params">Function</span>&#125; <span class="params">handler</span> <span class="params">Function</span> <span class="params">to</span> <span class="params">call</span> <span class="params">in</span> <span class="params">response</span> <span class="params">to</span> <span class="params">given</span> <span class="params">event</span></span></span><br><span class="line"><span class="function">     * @<span class="params">memberOf</span> <span class="params">mitt</span></span></span><br><span class="line"><span class="function">     */</span></span><br><span class="line"><span class="function">    <span class="params">on</span>&lt;<span class="params">Key</span> <span class="params">extends</span> <span class="params">keyof</span> <span class="params">Events</span>&gt;(<span class="params"><span class="keyword">type</span>: Key, handler: GenericEventHandler</span>) &#123;</span></span><br><span class="line"><span class="function">      <span class="params">const</span> <span class="params">handlers</span>: <span class="params">Array</span>&lt;<span class="params">GenericEventHandler</span>&gt; | <span class="params">undefined</span> = <span class="params">all</span>!.<span class="params">get</span>(<span class="params"><span class="keyword">type</span></span>);</span></span><br><span class="line"><span class="function">      <span class="params">if</span> (<span class="params">handlers</span>) &#123;</span></span><br><span class="line"><span class="function">        <span class="params">handlers</span>.<span class="params">push</span>(<span class="params">handler</span>);</span></span><br><span class="line"><span class="function">      &#125; <span class="params">else</span> &#123;</span></span><br><span class="line"><span class="function">        <span class="params">all</span>!.<span class="params">set</span>(<span class="params"><span class="keyword">type</span>, [handler] <span class="keyword">as</span> EventHandlerList&lt;Events[keyof Events]&gt;</span>);</span></span><br><span class="line"><span class="function">      &#125;</span></span><br><span class="line"><span class="function">    &#125;,</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    /**</span></span><br><span class="line"><span class="function">     * <span class="params">Remove</span> <span class="params">an</span> <span class="params">event</span> <span class="params">handler</span> <span class="params">for</span> <span class="params">the</span> <span class="params">given</span> <span class="params">type</span>.</span></span><br><span class="line"><span class="function">     * <span class="params">If</span> `<span class="params">handler</span>` <span class="params">is</span> <span class="params">omitted</span>, <span class="params">all</span> <span class="params">handlers</span> <span class="params">of</span> <span class="params">the</span> <span class="params">given</span> <span class="params">type</span> <span class="params">are</span> <span class="params">removed</span>.</span></span><br><span class="line"><span class="function">     * @<span class="params">param</span> &#123;<span class="params">string</span>|<span class="params">symbol</span>&#125; <span class="params">type</span> <span class="params">Type</span> <span class="params">of</span> <span class="params">event</span> <span class="params">to</span> <span class="params">unregister</span> `<span class="params">handler</span>` <span class="params">from</span>, <span class="params">or</span> `'*'`</span></span><br><span class="line"><span class="function">     * @<span class="params">param</span> &#123;<span class="params">Function</span>&#125; [<span class="params">handler</span>] <span class="params">Handler</span> <span class="params">function</span> <span class="params">to</span> <span class="params">remove</span></span></span><br><span class="line"><span class="function">     * @<span class="params">memberOf</span> <span class="params">mitt</span></span></span><br><span class="line"><span class="function">     */</span></span><br><span class="line"><span class="function">    <span class="params">off</span>&lt;<span class="params">Key</span> <span class="params">extends</span> <span class="params">keyof</span> <span class="params">Events</span>&gt;(<span class="params"><span class="keyword">type</span>: Key, handler?: GenericEventHandler</span>) &#123;</span></span><br><span class="line"><span class="function">      <span class="params">const</span> <span class="params">handlers</span>: <span class="params">Array</span>&lt;<span class="params">GenericEventHandler</span>&gt; | <span class="params">undefined</span> = <span class="params">all</span>!.<span class="params">get</span>(<span class="params"><span class="keyword">type</span></span>);</span></span><br><span class="line"><span class="function">      <span class="params">if</span> (<span class="params">handlers</span>) &#123;</span></span><br><span class="line"><span class="function">        <span class="params">if</span> (<span class="params">handler</span>) &#123;</span></span><br><span class="line"><span class="function">          <span class="params">handlers</span>.<span class="params">splice</span>(<span class="params">handlers.indexOf(<span class="params">handler</span>) &gt;&gt;&gt; 0, 1</span>);</span></span><br><span class="line"><span class="function">        &#125; <span class="params">else</span> &#123;</span></span><br><span class="line"><span class="function">          <span class="params">all</span>!.<span class="params">set</span>(<span class="params"><span class="keyword">type</span>, []</span>);</span></span><br><span class="line"><span class="function">        &#125;</span></span><br><span class="line"><span class="function">      &#125;</span></span><br><span class="line"><span class="function">    &#125;,</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    /**</span></span><br><span class="line"><span class="function">     * <span class="params">Invoke</span> <span class="params">all</span> <span class="params">handlers</span> <span class="params">for</span> <span class="params">the</span> <span class="params">given</span> <span class="params">type</span>.</span></span><br><span class="line"><span class="function">     * <span class="params">If</span> <span class="params">present</span>, `'*'` <span class="params">handlers</span> <span class="params">are</span> <span class="params">invoked</span> <span class="params">after</span> <span class="params">type</span>-<span class="params">matched</span> <span class="params">handlers</span>.</span></span><br><span class="line"><span class="function">     *</span></span><br><span class="line"><span class="function">     * <span class="params">Note</span>: <span class="params">Manually</span> <span class="params">firing</span> '*' <span class="params">handlers</span> <span class="params">is</span> <span class="params">not</span> <span class="params">supported</span>.</span></span><br><span class="line"><span class="function">     *</span></span><br><span class="line"><span class="function">     * @<span class="params">param</span> &#123;<span class="params">string</span>|<span class="params">symbol</span>&#125; <span class="params">type</span> <span class="params">The</span> <span class="params">event</span> <span class="params">type</span> <span class="params">to</span> <span class="params">invoke</span></span></span><br><span class="line"><span class="function">     * @<span class="params">param</span> &#123;<span class="params">Any</span>&#125; [<span class="params">evt</span>] <span class="params">Any</span> <span class="params">value</span> (<span class="params">object is recommended and powerful</span>), <span class="params">passed</span> <span class="params">to</span> <span class="params">each</span> <span class="params">handler</span></span></span><br><span class="line"><span class="function">     * @<span class="params">memberOf</span> <span class="params">mitt</span></span></span><br><span class="line"><span class="function">     */</span></span><br><span class="line"><span class="function">    <span class="params">emit</span>&lt;<span class="params">Key</span> <span class="params">extends</span> <span class="params">keyof</span> <span class="params">Events</span>&gt;(<span class="params"><span class="keyword">type</span>: Key, evt?: Events[Key]</span>) &#123;</span></span><br><span class="line"><span class="function">      <span class="params">let</span> <span class="params">handlers</span> = <span class="params">all</span>!.<span class="params">get</span>(<span class="params"><span class="keyword">type</span></span>);</span></span><br><span class="line"><span class="function">      <span class="params">if</span> (<span class="params">handlers</span>) &#123;</span></span><br><span class="line"><span class="function">        (<span class="params">handlers <span class="keyword">as</span> EventHandlerList&lt;Events[keyof Events]&gt;</span>)</span></span><br><span class="line"><span class="function">          .<span class="params">slice</span><span class="params">()</span></span></span><br><span class="line"><span class="function">          .<span class="params">map</span>(<span class="params">(<span class="params">handler</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">            handler(<span class="params">evt!</span>);</span></span></span><br><span class="line"><span class="function"><span class="params">          &#125;</span>);</span></span><br><span class="line"><span class="function">      &#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">      <span class="params">handlers</span> = <span class="params">all</span>!.<span class="params">get</span>(<span class="params">'*'</span>);</span></span><br><span class="line"><span class="function">      <span class="params">if</span> (<span class="params">handlers</span>) &#123;</span></span><br><span class="line"><span class="function">        (<span class="params">handlers <span class="keyword">as</span> WildCardEventHandlerList&lt;Events&gt;</span>)</span></span><br><span class="line"><span class="function">          .<span class="params">slice</span><span class="params">()</span></span></span><br><span class="line"><span class="function">          .<span class="params">map</span>(<span class="params">(<span class="params">handler</span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">            handler(<span class="params"><span class="keyword">type</span>, evt!</span>);</span></span></span><br><span class="line"><span class="function"><span class="params">          &#125;</span>);</span></span><br><span class="line"><span class="function">      &#125;</span></span><br><span class="line"><span class="function">    &#125;,</span></span><br><span class="line"><span class="function">  &#125;;</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>defaultChecked 、 checked的区别</strong></p>
<p>注意defaultChecked 和 checked的区别，类似的还有：defaultValue 和 value</p>
<h3 id="fetch发送请求"><a href="#fetch发送请求" class="headerlink" title="fetch发送请求"></a><code>fetch</code>发送请求</h3><blockquote>
<p>概念:<code>关注分离</code>的设计思想</p>
</blockquote>
<blockquote>
<ol>
<li>Fetch 是浏览器提供的原生 AJAX 接口。</li>
</ol>
<p>由于原来的XMLHttpRequest<code>不符合关注分离原则</code>，且基于事件的模型在处理异步上已经没有现代的Promise等那么有优势。因此Fetch出现来解决这种问题。</p>
<ol start="2">
<li><p>特点:</p>
<ul>
<li><p>fetch: <code>原生函数</code>，不再使用XmlHttpRequest对象提交ajax请求</p>
</li>
<li><p><code>老版本浏览器可能不支持</code></p>
</li>
<li><p>使用 fetch 无法<code>取消一个请求</code>。这是因为Fetch API<code>基于 Promise</code>，而Promise无法做到这一点。由于Fetch是典型的异步场景，所以大部分遇到的问题不是 Fetch 的，其实是 Promise 的。</p>
</li>
</ul>
</li>
<li><p>如果直接使用<code>fetch</code>,返回的并不是直接的结果它只是一个<code>HTTP响应</code>，而不是真的数据。想要获取数据,方法有二:</p>
</li>
</ol>
<p>① 使用async+await获取</p>
<p>② 使用promise的链式调用,再第一个then中将其返回,再下个then中在使用</p>
<ol start="4">
<li>代码示例</li>
</ol>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代码示例</span></span><br><span class="line">----------------------------- 未优化:使用then链式调用 ---------------------------------------------------------</span><br><span class="line">fetch(<span class="string">`/api1/search/users2?q=<span class="subst">$&#123;keyWord&#125;</span>`</span>).then(</span><br><span class="line">			response =&gt; &#123;</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">'联系服务器成功了'</span>);</span><br><span class="line">				<span class="keyword">return</span> response.json()</span><br><span class="line">			&#125;,</span><br><span class="line">			error =&gt; &#123;</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">'联系服务器失败了'</span>,error);</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">		).then(</span><br><span class="line">			response =&gt; &#123;<span class="built_in">console</span>.log(<span class="string">'获取数据成功了'</span>,response);&#125;,</span><br><span class="line">			error =&gt; &#123;<span class="built_in">console</span>.log(<span class="string">'获取数据失败了'</span>,error);&#125;</span><br><span class="line">) </span><br><span class="line">----------------------------- 优化后:使用<span class="keyword">async</span>+<span class="keyword">await</span> ---------------------------------------------------------</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="keyword">const</span> response= <span class="keyword">await</span> fetch(<span class="string">`/api1/search/users2?q=<span class="subst">$&#123;keyWord&#125;</span>`</span>)</span><br><span class="line">		<span class="keyword">const</span> data = <span class="keyword">await</span> response.json()</span><br><span class="line">		<span class="built_in">console</span>.log(data);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">		onsole.log(<span class="string">'请求出错'</span>,error);</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="React-路由"><a href="#React-路由" class="headerlink" title="React 路由"></a>React 路由</h2><h3 id="SPA的理解"><a href="#SPA的理解" class="headerlink" title="SPA的理解"></a>SPA的理解</h3><blockquote>
<ol>
<li><p>单页Web应用（single page web application，SPA）。</p>
</li>
<li><p>整个应用只有<strong>一个完整的页面</strong>。</p>
</li>
<li><p>点击页面中的链接<strong>不会刷新</strong>页面，只会做页面的<strong>局部更新。</strong></p>
</li>
<li><p>数据都需要通过ajax请求获取, 并在前端异步展现。</p>
</li>
</ol>
</blockquote>
<h3 id="路由的理解"><a href="#路由的理解" class="headerlink" title="路由的理解"></a>路由的理解</h3><p><strong>什么是路由?</strong></p>
<blockquote>
<ol>
<li><p>一个路由就是一个映射关系(key:value)</p>
</li>
<li><p>key为路径, value可能是function或component</p>
</li>
</ol>
</blockquote>
<p> <strong>路由分类</strong></p>
<p><strong>1、后端路由</strong></p>
<blockquote>
<p>1)   理解： value是function, 用来处理客户端提交的请求。</p>
<p>2)   注册路由： router.get(path, function(req, res))</p>
<p>3)   工作过程：当node接收到一个请求时, 根据请求路径找到匹配的路由, 调用路由中的函数来处理请求, 返回响应数据</p>
</blockquote>
<p><strong>2、前端路由</strong></p>
<blockquote>
<p>1)   浏览器端路由，value是component，用于展示页面内容。</p>
<p>2)   注册路由: <code>&lt;Route path=&quot;/test&quot; component={Test}&gt;</code></p>
<p>3)   工作过程：当浏览器的path变为/test时, 当前路由组件就会变为Test组件</p>
</blockquote>
<h3 id="react-router-dom的理解"><a href="#react-router-dom的理解" class="headerlink" title="react-router-dom的理解"></a>react-router-dom的理解</h3><p><strong>相关概念</strong></p>
<blockquote>
<ol>
<li><p>react的一个插件库。</p>
</li>
<li><p>专门用来实现一个SPA应用。</p>
</li>
<li><p>基于react的项目基本都会用到此库。</p>
</li>
</ol>
</blockquote>
<p><strong>相关api</strong></p>
<p><strong>1、内置组件</strong></p>
<blockquote>
<ol>
<li><p><code>&lt;BrowserRouter&gt;</code></p>
</li>
<li><p><code>&lt;HashRouter&gt;</code></p>
</li>
<li><p><code>&lt;Route&gt;</code></p>
</li>
<li><p><code>&lt;Redirect&gt;</code></p>
</li>
<li><p><code>&lt;Link&gt;</code></p>
</li>
<li><p><code>&lt;NavLink&gt;</code></p>
</li>
<li><p><code>&lt;Switch&gt;</code></p>
</li>
</ol>
</blockquote>
<p><strong>2、其他</strong></p>
<blockquote>
<ol>
<li><p>history对象</p>
</li>
<li><p>match对象</p>
</li>
<li><p>withRouter函数</p>
</li>
</ol>
</blockquote>
<h3 id="路由的基本使用"><a href="#路由的基本使用" class="headerlink" title="路由的基本使用"></a>路由的基本使用</h3><p>1.明确好界面中的导航区、展示区</p>
<p>2.导航区的a标签改为Link标签</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link to=<span class="string">"/xxxxx"</span>&gt;Demo&lt;<span class="regexp">/Link&gt;</span></span><br></pre></td></tr></table></figure>
<p>3.展示区写Route标签进行路径的匹配 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=<span class="string">'/xxxx'</span> component=&#123;Demo&#125;/&gt;</span><br></pre></td></tr></table></figure>
<p>4.<code>&lt;App&gt;</code>的最外侧包裹了一个<code>&lt;BrowserRouter&gt;或&lt;HashRouter&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(</span><br><span class="line">	&lt;BrowserRouter&gt;</span><br><span class="line">		&lt;App/&gt;</span><br><span class="line">	&lt;/BrowserRouter&gt;,</span><br><span class="line">	document.getElementById(&apos;root&apos;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="路由组件与一般组件"><a href="#路由组件与一般组件" class="headerlink" title="路由组件与一般组件"></a>路由组件与一般组件</h3><p><strong>1.写法不同：</strong></p>
<p>​      一般组件：<code>&lt;Demo/&gt;</code></p>
<p>​      路由组件：<code>&lt;Route path=&quot;/demo&quot; component={Demo}/&gt;</code></p>
<p><strong>2.存放位置不同：</strong></p>
<p>​      一般组件：components</p>
<p>​      路由组件：pages</p>
<p><strong>3.接收到的props不同：</strong></p>
<p> 一般组件：写组件标签时传递了什么，就能收到什么</p>
<p> 路由组件：接收到三个固定的属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//路由属性打印结果展示</span><br><span class="line">history:</span><br><span class="line">	go: ƒ go(n)</span><br><span class="line">	goBack: ƒ goBack()</span><br><span class="line">	goForward: ƒ goForward()</span><br><span class="line">	push: ƒ push(path, state)</span><br><span class="line">	replace: ƒ replace(path, state)</span><br><span class="line">location:</span><br><span class="line">    pathname: &quot;/about&quot;</span><br><span class="line">	search: &quot;&quot;</span><br><span class="line">	state: undefined</span><br><span class="line">	match:</span><br><span class="line">params: &#123; &#125;</span><br><span class="line">	path: &quot;/about&quot;</span><br><span class="line">	url: &quot;/about&quot;</span><br></pre></td></tr></table></figure>
<h3 id="NavLink使用与封装"><a href="#NavLink使用与封装" class="headerlink" title="NavLink使用与封装"></a>NavLink使用与封装</h3><ol>
<li><p>NavLink可以<code>实现路由链接的高亮</code>，通过<code>activeClassName指定样式名</code></p>
</li>
<li><p>封装</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//封装示例</span><br><span class="line">export default class MyNavLink extends Component &#123;</span><br><span class="line">	render() &#123;</span><br><span class="line">		return (</span><br><span class="line">			&lt;NavLink activeClassName=&quot;atguigu&quot; className=&quot;list-group-item&quot; &#123;...this.props&#125;/&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用与调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//原生html中，靠&lt;a&gt;跳转不同的页面</span><br><span class="line">&#123;/* &lt;a className=&quot;list-group-item&quot; href=&quot;./about.html&quot;&gt;About&lt;/a&gt;</span><br><span class="line">&lt;a className=&quot;list-group-item active&quot; href=&quot;./home.html&quot;&gt;Home&lt;/a&gt; */&#125;</span><br><span class="line"></span><br><span class="line"> &#123;/* 在React中靠路由链接实现切换组件--编写路由链接 */&#125;</span><br><span class="line"> 	&lt;MyNavLink to=&quot;/about&quot;&gt;About&lt;/MyNavLink&gt;</span><br><span class="line"> 	&lt;MyNavLink to=&quot;/home&quot;&gt;Home&lt;/MyNavLink&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Switch的使用"><a href="#Switch的使用" class="headerlink" title="Switch的使用"></a>Switch的使用</h3><p>1.通常情况下，path和component是一一对应的关系。</p>
<p>2.Switch可以提高路由匹配效率(单一匹配) —- 即匹配到一个后将不再往下匹配</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">	&lt;Route path=&quot;/about&quot; component=&#123;About&#125;/&gt;</span><br><span class="line">	&lt;Route path=&quot;/home&quot; component=&#123;Home&#125;/&gt;</span><br><span class="line">	&lt;Route path=&quot;/home&quot; component=&#123;Test&#125;/&gt;</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>
<h3 id="解决多级路径刷新页面样式丢失的问题"><a href="#解决多级路径刷新页面样式丢失的问题" class="headerlink" title="解决多级路径刷新页面样式丢失的问题"></a>解决多级路径刷新页面样式丢失的问题</h3><p>1.public/index.html 中 引入样式时不写 ./ 写 / （常用）</p>
<p>2.public/index.html 中 引入样式时不写 ./ 写 <code>%PUBLIC_URL%</code> （常用,但<code>只在react中</code>有效果）</p>
<p>3.使用HashRouter (不常用)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">		&lt;title&gt;react脚手架&lt;/title&gt;</span><br><span class="line">   &lt;!-- 方法二 --&gt;</span><br><span class="line">		&lt;link rel=&quot;icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot; /&gt;</span><br><span class="line">     &lt;!-- 方法一 --&gt;</span><br><span class="line">		&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/bootstrap.css&quot;&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="路由的严格匹配与模糊匹配"><a href="#路由的严格匹配与模糊匹配" class="headerlink" title="路由的严格匹配与模糊匹配"></a>路由的严格匹配与模糊匹配</h3><ol>
<li><p>默认使用的是模糊匹配（简单记：【输入的路径】必须包含要【匹配的路径】，且顺序要一致）</p>
</li>
<li><p>开启严格匹配：<route `exact="{true}`path=" about"" component="{About}/">  </route></p>
<p>可以省略<code>exact={true}</code>为<code>exact</code></p>
</li>
<li><p><code>严格匹配不要随便开启</code>，需要再开，有些时候开启会导致无法继续匹配二级路由</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//编写路由链接</span><br><span class="line">	&lt;MyNavLink to=&quot;/about&quot;&gt;About&lt;/MyNavLink&gt;</span><br><span class="line">	&lt;MyNavLink to=&quot;/home/a/b&quot;&gt;Home&lt;/MyNavLink&gt;</span><br><span class="line"></span><br><span class="line">&#123;/* 注册路由 */&#125;</span><br><span class="line">	&lt;Switch&gt;</span><br><span class="line">		&lt;Route exact path=&quot;/about&quot; component=&#123;About&#125;/&gt;</span><br><span class="line">		&lt;Route exact path=&quot;/home&quot; component=&#123;Home&#125;/&gt;</span><br><span class="line">	&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Redirect的使用"><a href="#Redirect的使用" class="headerlink" title="Redirect的使用"></a><strong>Redirect的使用</strong></h3><ol>
<li><p>一般写在所有路由注册的<code>最下方</code>，当所有路由都<code>无法匹配时</code>，跳转到Redirect指定的路由</p>
</li>
<li><p>具体编码：</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">		&lt;Route path=&quot;/about&quot; component=&#123;About&#125;/&gt;</span><br><span class="line">		&lt;Route path=&quot;/home&quot; component=&#123;Home&#125;/&gt;</span><br><span class="line">		&lt;Redirect to=&quot;/about&quot;/&gt;</span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>
<h3 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h3><ol>
<li><p>注册子路由时要写上父路由的path值</p>
</li>
<li><p>路由的匹配是按照注册路由的顺序进行的</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-------------------注册一级路由-----------------------------</span><br><span class="line">	&#123;/* 在React中靠路由链接实现切换组件--编写路由链接 */&#125;</span><br><span class="line">	&lt;MyNavLink to=&quot;/about&quot;&gt;About&lt;/MyNavLink&gt;</span><br><span class="line">	&lt;MyNavLink to=&quot;/home&quot;&gt;Home&lt;/MyNavLink&gt;</span><br><span class="line">   &#123;/* 注册路由 */&#125;</span><br><span class="line">	&lt;Switch&gt;</span><br><span class="line">		&lt;Route path=&quot;/about&quot; component=&#123;About&#125;/&gt;</span><br><span class="line">		&lt;Route path=&quot;/home&quot; component=&#123;Home&#125;/&gt;</span><br><span class="line">		&lt;Redirect to=&quot;/about&quot;/&gt;</span><br><span class="line">	&lt;/Switch&gt;</span><br><span class="line">----------------------注册二级路由 :Home组件-----------------------------------</span><br><span class="line">   &lt;div&gt;</span><br><span class="line">		&lt;ul className=&quot;nav nav-tabs&quot;&gt;</span><br><span class="line">			&lt;li&gt;</span><br><span class="line">				&lt;MyNavLink to=&quot;/home/news&quot;&gt;News&lt;/MyNavLink&gt;</span><br><span class="line">			&lt;/li&gt;</span><br><span class="line">			&lt;li&gt;</span><br><span class="line">				&lt;MyNavLink to=&quot;/home/message&quot;&gt;Message&lt;/MyNavLink&gt;</span><br><span class="line">			&lt;/li&gt;</span><br><span class="line">		&lt;/ul&gt;</span><br><span class="line">		&#123;/* 注册路由 */&#125;</span><br><span class="line">		&lt;Switch&gt;</span><br><span class="line">			&lt;Route path=&quot;/home/news&quot; component=&#123;News&#125;/&gt;</span><br><span class="line">			&lt;Route path=&quot;/home/message&quot; component=&#123;Message&#125;/&gt;</span><br><span class="line">			&lt;Redirect to=&quot;/home/news&quot;/&gt;</span><br><span class="line">		&lt;/Switch&gt;</span><br><span class="line">	&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="向路由组件传递参数"><a href="#向路由组件传递参数" class="headerlink" title="向路由组件传递参数"></a>向路由组件传递参数</h3><p><strong>params参数</strong></p>
<ol>
<li><p>路由链接(携带参数)：<code>&lt;Link to=&#39;/demo/test/tom/18&#39;}&gt;详情&lt;/Link&gt;</code></p>
</li>
<li><p>注册路由(声明接收)：<code>&lt;Route path=&quot;/demo/test/:name/:age&quot; component={Test}/&gt;</code></p>
</li>
<li><p>接收参数：this.props.match.params</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------发送参数:父组件----------------------------------------------</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">       &#123;/* 向路由组件传递params参数 */&#125;</span><br><span class="line">       &lt;Link to=&#123;`/home/message/detail/$&#123;msgObj.id&#125;/$&#123;msgObj.title&#125;`&#125;&gt;&#123;msgObj.title&#125;&lt;/Link&gt;</span><br><span class="line">       &lt;hr /&gt;</span><br><span class="line">       &#123;/* 声明接收params参数 */&#125;</span><br><span class="line">       &lt;Route path=&quot;/home/message/detail/:id/:title&quot; component=&#123;Detail&#125; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">	--------------------------------接受参数:子组件-----------------------------------------------------------</span><br><span class="line">    const &#123;id,title&#125; = this.props.match.params</span><br></pre></td></tr></table></figure>
<p><strong>search参数</strong></p>
<ol>
<li>路由链接(携带参数)：<code>&lt;Link to=&#39;/demo/test?name=tom&amp;age=18&#39;}&gt;详情&lt;/Link&gt;</code></li>
<li>注册路由(<code>无需声明</code>，正常注册即可)：<code>&lt;Route path=&quot;/demo/test&quot; component={Test}/&gt;</code></li>
<li>接收参数：this.props.location.search</li>
<li>备注：获取到的search是<code>urlencoded编码字符串</code>，需要<code>借助querystring解析</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------发送参数:父组件----------------------------------------------</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">      	&#123;/* 向路由组件传递search参数 */&#125;</span><br><span class="line">		&lt;Link to=&#123;`/home/message/detail/?id=$&#123;msgObj.id&#125;&amp;title=$&#123;msgObj.title&#125;`&#125;&gt;&#123;msgObj.title&#125;&lt;/Link&gt;</span><br><span class="line">       &lt;hr /&gt;</span><br><span class="line">     	&#123;/* search参数无需声明接收，正常注册路由即可 */&#125;</span><br><span class="line">		&lt;Route path=&quot;/home/message/detail&quot; component=&#123;Detail&#125;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">	--------------------------------接受参数:子组件-----------------------------------------------------------</span><br><span class="line">    import qs from &apos;querystring&apos;</span><br><span class="line">	// 接收search参数</span><br><span class="line">	const &#123;search&#125; = this.props.location</span><br><span class="line">	const &#123;id,title&#125; = qs.parse(search.slice(1))</span><br></pre></td></tr></table></figure>
<p><strong>state参数</strong></p>
<ol>
<li>路由链接(携带参数)：[<code>&lt;Link to={ {pathname:&#39;/demo/test&#39;,state:{name:&#39;tom&#39;,age:18} } }&gt;详情&lt;/Link&gt;</code>]</li>
<li>注册路由(无需声明，正常注册即可)：[<code>&lt;Route path=&quot;/demo/test&quot; component={Test}/&gt;</code>]</li>
<li><p>接收参数：this.props.location.state</p>
<ul>
<li>备注：使用<code>BrowserRouter</code>刷新才可以<code>保留住参数</code>,使用<code>HashRouter</code>刷新后state将会没有<code>history</code>来保存参数</li>
<li>子组件接受参数时<code>const {id,title} = this.props.location.state || {   }</code> ,后面添加<code>||{   }</code>是防止使用<code>HashRouter</code>后state为undefined时报错</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------发送参数:父组件----------------------------------------------</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">      	&#123;/* 向路由组件传递state参数 */&#125;</span><br><span class="line">		&lt;Link to=&#123; &#123;pathname:&apos;/home/message/detail&apos;,state:&#123;id:msgObj.id,title:msgObj.title&#125; &#125; &#125;&gt;&#123;msgObj.title&#125;&lt;/Link&gt;</span><br><span class="line"></span><br><span class="line">       &lt;hr /&gt;</span><br><span class="line">     	&#123;/* state参数无需声明接收，正常注册路由即可 */&#125;</span><br><span class="line">		&lt;Route path=&quot;/home/message/detail&quot; component=&#123;Detail&#125;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">	--------------------------------接受参数:子组件-----------------------------------------------------------</span><br><span class="line">    // 接收state参数,后面添加`||&#123;  &#125;`是防止使用`HashRouter`后state为undefined时报错</span><br><span class="line">	const &#123;id,title&#125; = this.props.location.state || &#123; &#125;</span><br></pre></td></tr></table></figure>
<h3 id="编程式路由导航"><a href="#编程式路由导航" class="headerlink" title="编程式路由导航"></a>编程式路由导航</h3><p><code>借助this.prosp.history对象上的API对</code>操作路由跳转、前进、后退  </p>
<ol>
<li><p>-this.prosp.history.push()</p>
<p>将历史记录压入栈</p>
</li>
<li><p>-this.props.history.replace()</p>
<p>替代栈位置,即不会产生历史记录</p>
</li>
<li><p>-this.props.history.goBack()</p>
<p>回退一格</p>
</li>
<li><p>-this.props.history.goForward()</p>
<p>前进一格</p>
</li>
<li><p>-this.props.history.go()</p>
<p>前进或者后退n格(根据传入的数字正负数)</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import &#123; Link, Route &#125; from &apos;react-router-dom&apos;</span><br><span class="line">import Detail from &apos;./Detail&apos;</span><br><span class="line"></span><br><span class="line">export default class Message extends Component &#123;</span><br><span class="line"> state = &#123;</span><br><span class="line">   messageArr: [</span><br><span class="line">     &#123; id: &apos;01&apos;, title: &apos;消息1&apos; &#125;,</span><br><span class="line">     &#123; id: &apos;02&apos;, title: &apos;消息2&apos; &#125;,</span><br><span class="line">     &#123; id: &apos;03&apos;, title: &apos;消息3&apos; &#125;,</span><br><span class="line">   ]</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> replaceShow = (id, title) =&gt; &#123;</span><br><span class="line">   //replace跳转+携带params参数</span><br><span class="line">   //this.props.history.replace(`/home/message/detail/$&#123;id&#125;/$&#123;title&#125;`)</span><br><span class="line"></span><br><span class="line">   //replace跳转+携带search参数</span><br><span class="line">   // this.props.history.replace(`/home/message/detail?id=$&#123;id&#125;&amp;title=$&#123;title&#125;`)</span><br><span class="line"></span><br><span class="line">   //replace跳转+携带state参数</span><br><span class="line">   this.props.history.replace(`/home/message/detail`, &#123; id, title &#125;)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> pushShow = (id, title) =&gt; &#123;</span><br><span class="line">   //push跳转+携带params参数</span><br><span class="line">   // this.props.history.push(`/home/message/detail/$&#123;id&#125;/$&#123;title&#125;`)</span><br><span class="line"></span><br><span class="line">   //push跳转+携带search参数</span><br><span class="line">   // this.props.history.push(`/home/message/detail?id=$&#123;id&#125;&amp;title=$&#123;title&#125;`)</span><br><span class="line"></span><br><span class="line">   //push跳转+携带state参数</span><br><span class="line">   this.props.history.push(`/home/message/detail`, &#123; id, title &#125;)</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> back = () =&gt; &#123;</span><br><span class="line">   this.props.history.goBack()</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> forward = () =&gt; &#123;</span><br><span class="line">   this.props.history.goForward()</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> go = () =&gt; &#123;</span><br><span class="line">   this.props.history.go(-2)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> render() &#123;</span><br><span class="line">   const &#123; messageArr &#125; = this.state</span><br><span class="line">   return (</span><br><span class="line">     &lt;div&gt;</span><br><span class="line">       &lt;ul&gt;</span><br><span class="line">         &#123;</span><br><span class="line">           messageArr.map((msgObj) =&gt; &#123;</span><br><span class="line">             return (</span><br><span class="line">               &lt;li key=&#123;msgObj.id&#125;&gt;</span><br><span class="line"></span><br><span class="line">                 &#123;/* 向路由组件传递params参数 */&#125;</span><br><span class="line">                 &#123;/* &lt;Link to=&#123;`/home/message/detail/$&#123;msgObj.id&#125;/$&#123;msgObj.title&#125;`&#125;&gt;&#123;msgObj.title&#125;&lt;/Link&gt; */&#125;</span><br><span class="line"></span><br><span class="line">                 &#123;/* 向路由组件传递search参数 */&#125;</span><br><span class="line">                 &#123;/* &lt;Link to=&#123;`/home/message/detail/?id=$&#123;msgObj.id&#125;&amp;title=$&#123;msgObj.title&#125;`&#125;&gt;&#123;msgObj.title&#125;&lt;/Link&gt; */&#125;</span><br><span class="line"></span><br><span class="line">                 &#123;/* 向路由组件传递state参数 */&#125;</span><br><span class="line">                 &lt;Link to=&#123;&#123; pathname: &apos;/home/message/detail&apos;, state: &#123; id: msgObj.id, title: msgObj.title &#125; &#125;&#125;&gt;&#123;msgObj.title&#125;&lt;/Link&gt;</span><br><span class="line">			&amp;nbsp;&lt;button onClick=&#123;() =&gt; this.pushShow(msgObj.id, msgObj.title)&#125;&gt;push查看&lt;/button&gt;</span><br><span class="line">			&amp;nbsp;&lt;button onClick=&#123;() =&gt; this.replaceShow(msgObj.id, msgObj.title)&#125;&gt;replace查看&lt;/button&gt;</span><br><span class="line">               &lt;/li&gt;</span><br><span class="line">             )</span><br><span class="line">           &#125;)</span><br><span class="line">         &#125;</span><br><span class="line">       &lt;/ul&gt;</span><br><span class="line">       &lt;hr /&gt;</span><br><span class="line">       &#123;/* 声明接收params参数 */&#125;</span><br><span class="line">       &#123;/* &lt;Route path=&quot;/home/message/detail/:id/:title&quot; component=&#123;Detail&#125;/&gt; */&#125;</span><br><span class="line"></span><br><span class="line">       &#123;/* search参数无需声明接收，正常注册路由即可 */&#125;</span><br><span class="line">       &#123;/* &lt;Route path=&quot;/home/message/detail&quot; component=&#123;Detail&#125;/&gt; */&#125;</span><br><span class="line"></span><br><span class="line">       &#123;/* state参数无需声明接收，正常注册路由即可 */&#125;</span><br><span class="line">       &lt;Route path=&quot;/home/message/detail&quot; component=&#123;Detail&#125; /&gt;</span><br><span class="line"></span><br><span class="line">       &lt;button onClick=&#123;this.back&#125;&gt;回退&lt;/button&gt;&amp;nbsp;</span><br><span class="line">       &lt;button onClick=&#123;this.forward&#125;&gt;前进&lt;/button&gt;&amp;nbsp;</span><br><span class="line">       &lt;button onClick=&#123;this.go&#125;&gt;go&lt;/button&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">   )</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="withRouter的使用"><a href="#withRouter的使用" class="headerlink" title="withRouter的使用"></a>withRouter的使用</h3><ol>
<li>withRouter可以加工一般组件，让一般组件具备路由组件所特有的API</li>
<li>withRouter的返回值是一个新组件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import &#123; withRouter &#125; from &apos;react-router-dom&apos;</span><br><span class="line">class Header extends Component &#123;</span><br><span class="line"> back = () =&gt; &#123; this.props.history.goBack()&#125;</span><br><span class="line"> forward = () =&gt; &#123;this.props.history.goForward()&#125;</span><br><span class="line"> go = () =&gt; &#123; this.props.history.go(-2)&#125;</span><br><span class="line"> render() &#123;</span><br><span class="line">   console.log(&apos;Header组件收到的props是&apos;, this.props);</span><br><span class="line">   return (</span><br><span class="line">     &lt;div className=&quot;page-header&quot;&gt;</span><br><span class="line">       &lt;h2&gt;React Router Demo&lt;/h2&gt;</span><br><span class="line">       &lt;button onClick=&#123;this.back&#125;&gt;回退&lt;/button&gt;&amp;nbsp;</span><br><span class="line">       &lt;button onClick=&#123;this.forward&#125;&gt;前进&lt;/button&gt;&amp;nbsp;</span><br><span class="line">       &lt;button onClick=&#123;this.go&#125;&gt;go&lt;/button&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">   )</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default withRouter(Header)</span><br></pre></td></tr></table></figure>
<h3 id="BrowserRouter与HashRouter的区别"><a href="#BrowserRouter与HashRouter的区别" class="headerlink" title="BrowserRouter与HashRouter的区别"></a>BrowserRouter与HashRouter的区别</h3><p>备注：HashRouter可以用于解决一些路径错误相关的问题。即在<code>问题6</code>中引入文件时可以不进行路径修改</p>
<p><strong>底层原理不一样：</strong></p>
<ol>
<li><p>BrowserRouter使用的是H5的history API，不兼容IE9及以下版本。</p>
<p><code>但一般来说都用的这个</code></p>
</li>
<li><p>HashRouter使用的是URL的哈希值。</p>
</li>
</ol>
<p><strong>path表现形式不一样</strong></p>
<ol>
<li><p>BrowserRouter的路径中没有#,例如：localhost:3000/demo/test</p>
</li>
<li><p>HashRouter的路径包含#,例如：localhost:3000/#/demo/test</p>
</li>
</ol>
<p><strong>刷新后对路由state参数的影响</strong></p>
<ol>
<li><p>BrowserRouter没有任何影响，因为state保存在history对象中。</p>
</li>
<li><p>HashRouter<code>刷新后会导致路由state参数的丢失！！！</code></p>
</li>
</ol>
<h2 id="Ant-Design"><a href="#Ant-Design" class="headerlink" title="Ant Design"></a>Ant Design</h2><blockquote>
<p><strong>ant-design(国内蚂蚁金服)</strong></p>
<ol>
<li>官网: <a href="https://ant.design/index-cn" target="_blank" rel="noopener">https://ant.design/index-cn</a></li>
<li>Github: <a href="https://github.com/ant-design/ant-design/" target="_blank" rel="noopener">https://github.com/ant-design/ant-design/</a></li>
</ol>
<p><strong>material-ui(国外)</strong></p>
<ol>
<li><p>官网: <a href="http://www.material-ui.com/#/" target="_blank" rel="noopener">http://www.material-ui.com/#/</a></p>
</li>
<li><p>github: <a href="https://github.com/callemall/material-ui" target="_blank" rel="noopener">https://github.com/callemall/material-ui</a></p>
</li>
</ol>
</blockquote>
<h3 id="按需引入与自定义主题"><a href="#按需引入与自定义主题" class="headerlink" title="按需引入与自定义主题"></a>按需引入与自定义主题</h3><p><strong>安装依赖</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-app-rewired customize-cra babel-plugin-import less less-loader</span><br></pre></td></tr></table></figure>
<p><strong>修改package.json</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">	&quot;start&quot;: &quot;react-app-rewired start&quot;,</span><br><span class="line">	&quot;build&quot;: &quot;react-app-rewired build&quot;,</span><br><span class="line">	&quot;test&quot;: &quot;react-app-rewired test&quot;,</span><br><span class="line">	&quot;eject&quot;: &quot;react-scripts eject&quot;</span><br><span class="line">	&#125;,</span><br></pre></td></tr></table></figure>
<p><strong>根目录下创建config-overrides.js</strong></p>
<p>注意:如果按照官方文档的自定义主题进行配置可能会报错,需要多加一层<code>lessOptions</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//配置具体的修改规则</span><br><span class="line">const &#123; override, fixBabelImports,addLessLoader&#125; = require(&apos;customize-cra&apos;);</span><br><span class="line">module.exports = override(</span><br><span class="line">	fixBabelImports(&apos;import&apos;, &#123;</span><br><span class="line">		libraryName: &apos;antd&apos;,</span><br><span class="line">		libraryDirectory: &apos;es&apos;,</span><br><span class="line">		style: true,</span><br><span class="line">	&#125;),</span><br><span class="line">	addLessLoader(&#123;</span><br><span class="line">		lessOptions:&#123;</span><br><span class="line">			javascriptEnabled: true,</span><br><span class="line">			modifyVars: &#123; &apos;@primary-color&apos;: &apos;green&apos; &#125;,</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;),</span><br><span class="line">-------------------官方方法,会报错-------------------------    </span><br><span class="line">+ addLessLoader(&#123;</span><br><span class="line">+   javascriptEnabled: true,</span><br><span class="line">+   modifyVars: &#123; &apos;@primary-color&apos;: &apos;#1DA57A&apos; &#125;,</span><br><span class="line">+ &#125;),</span><br><span class="line">---------------------------------------------------------   </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>备注：不用在组件里亲自引入样式了，即：import ‘antd/dist/antd.css’应该删掉</p>
<h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><p><strong>学习文档</strong></p>
<blockquote>
<ol>
<li><p>英文文档: <a href="https://redux.js.org/" target="_blank" rel="noopener">https://redux.js.org/</a></p>
</li>
<li><p>中文文档: <a href="http://www.redux.org.cn/" target="_blank" rel="noopener">http://www.redux.org.cn/</a></p>
</li>
<li><p>Github: <a href="https://github.com/reactjs/redux" target="_blank" rel="noopener">https://github.com/reactjs/redux</a></p>
</li>
</ol>
</blockquote>
<h3 id="redux是什么"><a href="#redux是什么" class="headerlink" title="redux是什么"></a>redux是什么</h3><ol>
<li><p>redux是一个专门用于做<code>状态管理的JS库</code>(不是react插件库)。</p>
</li>
<li><p>它可以用在react, angular, vue等项目中, 但基本与react配合使用。</p>
</li>
<li><p>作用: 集中式管理react应用中多个组件<code>共享</code>的状态。</p>
</li>
</ol>
<h3 id="什么情况下需要使用redux"><a href="#什么情况下需要使用redux" class="headerlink" title="什么情况下需要使用redux"></a>什么情况下需要使用redux</h3><ol>
<li><p>某个组件的状态，需要让其他组件可以随时拿到（共享）。</p>
</li>
<li><p>一个组件需要改变另一个组件的状态（通信）。</p>
</li>
<li><p>总体原则：能不用就不用, 如果不用比较吃力才考虑使用。</p>
</li>
</ol>
<h3 id="redux工作流程"><a href="#redux工作流程" class="headerlink" title="redux工作流程"></a>redux工作流程</h3><p><img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220907154305018.png" alt="image-20220907154305018"></p>
<h3 id="redux的三个核心概念"><a href="#redux的三个核心概念" class="headerlink" title="redux的三个核心概念"></a>redux的三个核心概念</h3><p><strong>action</strong></p>
<ol>
<li><p><code>动作的对象</code></p>
</li>
<li><p>包含2个属性</p>
<p>type：标识属性, 值为字符串, 唯一, 必要属性</p>
<p>data：数据属性, 值类型任意, 可选属性</p>
</li>
<li><p>例子：{ type: ‘ADD_STUDENT’,data:{name: ‘tom’,age:18} }</p>
</li>
</ol>
<p><strong>reducer</strong></p>
<ol>
<li>用于初始化状态、加工状态。</li>
<li><p>加工时，根据旧的state和action， 产生新的state的<code>纯函数(以下为纯函数概念)`</code></p>
<ul>
<li><code></code>纯函数:`一类特别的函数: 只要是同样的输入(实参)，必定得到同样的输出(返回)</li>
<li>必须遵守以下一些约束<br>1)   不得改写参数数据<br>2)   不会产生任何副作用，例如网络请求，输入和输出设备<br>3)   不能调用Date.now()或者Math.random()等不纯的方法 </li>
</ul>
</li>
<li><p><code>redux的reducer函数必须是一个纯函数</code></p>
</li>
</ol>
<p><strong>store</strong></p>
<ol>
<li><p>将state、action、reducer联系在一起的对象</p>
</li>
<li><p><code>如何得到此对象</code>?</p>
<ul>
<li>import {createStore} from ‘redux’</li>
<li>import reducer from ‘./reducers’<ul>
<li>const store = createStore(reducer)</li>
</ul>
</li>
</ul>
</li>
<li><p>此对象的功能?</p>
<ul>
<li><p>getState(): 得到state</p>
<ul>
<li><p>dispatch(action): 分发action, 触发reducer调用, 产生新的state</p>
</li>
<li><p>subscribe(listener): 注册监听, 当产生了新的state时, 自动调用</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="redux的核心API"><a href="#redux的核心API" class="headerlink" title="redux的核心API"></a>redux的核心API</h3><p><strong>createstore()与applyMiddleware()</strong></p>
<p>createstore()作用：创建包含指定reducer的store对象</p>
<p>applyMiddleware()作用：应用上基于redux的中间件(插件库)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//代码示例</span><br><span class="line">---------------------------store.js 部分代码---------------------------------</span><br><span class="line">//引入createStore,专门用于创建redux中最为核心的store对象</span><br><span class="line">import &#123;createStore,applyMiddleware&#125; from &apos;redux&apos;</span><br><span class="line">//暴露store</span><br><span class="line">export default createStore(reducer,composeWithDevTools(applyMiddleware(thunk)))</span><br></pre></td></tr></table></figure>
<p><strong>store对象</strong></p>
<ol>
<li><p>作用: redux库最核心的管理对象</p>
</li>
<li><p>它内部维护着:</p>
<ul>
<li><p>state</p>
</li>
<li><p>reducer</p>
</li>
</ul>
</li>
<li><p>核心方法:</p>
<ul>
<li><p>getState()</p>
</li>
<li><p>dispatch(action)</p>
</li>
<li><p>subscribe(listener)</p>
</li>
</ul>
</li>
<li><p>具体编码:</p>
<ul>
<li><p>store.getState()</p>
</li>
<li><p>store.dispatch({type:’INCREMENT’, number})</p>
</li>
<li><p>store.subscribe(render)</p>
</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//代码示例</span><br><span class="line">---------------------------store.js---------------------------------</span><br><span class="line">/**</span><br><span class="line">* 该文件撰文用于暴露一个store对象,整个应用只有一个store对象</span><br><span class="line">*/</span><br><span class="line">//引入createStore,专门用于创建redux中最为核心的store对象</span><br><span class="line">import &#123;createStore,applyMiddleware&#125; from &apos;redux&apos;</span><br><span class="line">//引入汇总后的reducer</span><br><span class="line">import reducer from &apos;./reducers&apos;</span><br><span class="line">//引入redux-thunk，用于支持异步action</span><br><span class="line">import thunk from &apos;redux-thunk&apos;</span><br><span class="line">//引入redux-devtools-extension</span><br><span class="line">import &#123;composeWithDevTools&#125; from &apos;redux-devtools-extension&apos;</span><br><span class="line">//暴露store</span><br><span class="line">export default createStore(reducer,composeWithDevTools(applyMiddleware(thunk)))</span><br><span class="line">----------------------------index.js 引入store对象--------------------------------</span><br><span class="line">import React from &apos;react&apos;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;</span><br><span class="line">import App from &apos;./App&apos;</span><br><span class="line">import store from &apos;./redux/store&apos;</span><br><span class="line">import &#123;Provider&#125; from &apos;react-redux&apos;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">	/* 此处需要用Provider包裹App，目的是让App所有的后代容器组件都能接收到store */</span><br><span class="line">	&lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">		&lt;App/&gt;</span><br><span class="line">	&lt;/Provider&gt;,</span><br><span class="line">	document.getElementById(&apos;root&apos;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>combineReducers()</strong></p>
<p>作用：合并多个reducer函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//代码示例</span><br><span class="line">------------------ redux/reducers/index.js ------------------------------------</span><br><span class="line">/**</span><br><span class="line"> * 该文件用于汇总所有的reducer为一个总的reducer</span><br><span class="line"> */</span><br><span class="line">//引入combineReducers，用于汇总多个reducer</span><br><span class="line">import &#123;combineReducers&#125; from &apos;redux&apos;</span><br><span class="line">//引入为Count组件服务的reducer</span><br><span class="line">import count from &apos;./count&apos;</span><br><span class="line">import persons from &apos;./person&apos;</span><br><span class="line"></span><br><span class="line">//汇总所有的reducer变为一个总的reducer</span><br><span class="line">export default combineReducers(&#123;</span><br><span class="line">  count,persons</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="redux-异步编程"><a href="#redux-异步编程" class="headerlink" title="redux 异步编程"></a>redux 异步编程</h3><blockquote>
<ol>
<li><p>redux默认是不能进行异步处理的,</p>
</li>
<li><p>某些时候应用中需要在<code>redux</code>中执行异步任务(ajax, 定时器)</p>
</li>
</ol>
</blockquote>
<p><strong>使用异步中间件</strong></p>
<p>下载依赖<code>npm install --save redux-thunk</code></p>
<p>使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//代码示例</span><br><span class="line">---------------------------store.js---------------------------------</span><br><span class="line">/**</span><br><span class="line"> * 该文件撰文用于暴露一个store对象,整个应用只有一个store对象</span><br><span class="line"> */</span><br><span class="line">//引入createStore,专门用于创建redux中最为核心的store对象</span><br><span class="line">import &#123;createStore,applyMiddleware&#125; from &apos;redux&apos;</span><br><span class="line">//引入汇总后的reducer</span><br><span class="line">import reducer from &apos;./reducers&apos;</span><br><span class="line">//引入redux-thunk，用于支持异步action</span><br><span class="line">import thunk from &apos;redux-thunk&apos;</span><br><span class="line">//引入redux-devtools-extension</span><br><span class="line">import &#123;composeWithDevTools&#125; from &apos;redux-devtools-extension&apos;</span><br><span class="line">//暴露store</span><br><span class="line">export default createStore(reducer,composeWithDevTools(applyMiddleware(thunk)))</span><br></pre></td></tr></table></figure>
<h3 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h3><blockquote>
<ol>
<li><p>一个react插件库</p>
</li>
<li><p>专门用来简化react应用中使用redux</p>
</li>
</ol>
</blockquote>
<p><strong>react-Redux将所有组件分成两大类</strong></p>
<p> <strong>1、UI组件</strong></p>
<blockquote>
<p>1)   只负责 UI 的呈现，不带有任何业务逻辑</p>
<p>2)   通过props接收数据(一般数据和函数)</p>
<p>3)   不使用任何 Redux 的 API</p>
<p>4)   一般保存在<code>components</code>文件夹下,也可以直接写在容器组件中直接加工成容器组件</p>
</blockquote>
<p><strong>2、容器组件</strong></p>
<blockquote>
<p>1)   负责管理数据和业务逻辑，不负责UI的呈现</p>
<p>2)   使用 Redux 的 API</p>
<p>3)   一般保存在<code>ontainers</code>文件夹下</p>
</blockquote>
<h4 id="相关API"><a href="#相关API" class="headerlink" title="相关API"></a>相关API</h4><p><strong>Provider</strong></p>
<p>作用: 让所有组件都可以得到state数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;</span><br><span class="line">import App from &apos;./App&apos;</span><br><span class="line">import store from &apos;./redux/store&apos;</span><br><span class="line">import &#123;Provider&#125; from &apos;react-redux&apos;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">	/* 此处需要用Provider包裹App，目的是让App所有的后代容器组件都能接收到store */</span><br><span class="line">	&lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">		&lt;App/&gt;</span><br><span class="line">	&lt;/Provider&gt;,</span><br><span class="line">	document.getElementById(&apos;root&apos;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong><code>connect()()</code></strong></p>
<ol>
<li><p>作用: 用于包装 UI 组件生成容器组件</p>
</li>
<li><p>使用connect(<code>mapDispatchToProps</code>,<code>mapDispatchToProps</code>)(UI组件)</p>
<p>注意点:</p>
<pre><code>1. 该方法默认传入`state`与`dispatch`
2. 可以省略`dispatch`直接传入`action`方法,该api会自动帮你调用`dispatch`
</code></pre></li>
</ol>
<p><strong>mapStateToProps</strong></p>
<p>作用:将外部的数据（即<code>state对象</code>）转换为UI组件的标签属性</p>
<p>1.mapStateToProps函数返回的是一个对象；</p>
<p>2.返回的对象中的key就作为传递给UI组件props的key,value就作为传递给UI组件props的value</p>
<p>3.mapStateToProps<code>用于传递状态</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function mapStateToProps(state)&#123;</span><br><span class="line">	return &#123;count:state&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>mapDispatchToProps</strong></p>
<p>作用:将<code>分发action的函数</code>转换为UI组件的标签属性</p>
<ol>
<li>mapDispatchToProps函数返回的是一个对象；</li>
<li>返回的对象中的key就作为传递给UI组件props的key,value就作为传递给UI组件props的value</li>
<li>mapDispatchToProps<code>用于传递操作状态的方法</code></li>
<li>可以省略<code>dispatch</code>,直接传入<code>action</code>,api将会<code>自动调用</code>dispatch</li>
</ol>
<p><strong>代码示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">------------------------------不简化代码-----------------------------------------------</span><br><span class="line">/* </span><br><span class="line">	1.mapStateToProps函数返回的是一个对象；</span><br><span class="line">	2.返回的对象中的key就作为传递给UI组件props的key,value就作为传递给UI组件props的value</span><br><span class="line">	3.mapStateToProps用于传递状态</span><br><span class="line">*/</span><br><span class="line">function mapStateToProps(state)&#123;</span><br><span class="line">	return &#123;count:state&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line">	1.mapDispatchToProps函数返回的是一个对象；</span><br><span class="line">	2.返回的对象中的key就作为传递给UI组件props的key,value就作为传递给UI组件props的value</span><br><span class="line">	3.mapDispatchToProps用于传递操作状态的方法</span><br><span class="line">*/</span><br><span class="line">function mapDispatchToProps(dispatch)&#123;</span><br><span class="line">	return &#123;</span><br><span class="line">		jia:number =&gt; dispatch(createIncrementAction(number)),</span><br><span class="line">		jian:number =&gt; dispatch(createDecrementAction(number)),</span><br><span class="line">		jiaAsync:(number,time) =&gt; dispatch(createIncrementAsyncAction(number,time)),</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//使用connect()()创建并暴露一个Count的容器组件</span><br><span class="line">export default connect(mapStateToProps,mapDispatchToProps)(CountUI)</span><br><span class="line"></span><br><span class="line">----------------下面是简化代码-----------------------------</span><br><span class="line">//使用connect()()创建并暴露一个Count的容器组件</span><br><span class="line">//使用connect(传入状态,操作状态方法)(UI组件)</span><br><span class="line">export default connect(</span><br><span class="line">state =&gt; (&#123;</span><br><span class="line">count: state.count,</span><br><span class="line">personCount: state.persons.length</span><br><span class="line">&#125;),</span><br><span class="line">&#123;increment, decrement, incrementAsync&#125;</span><br><span class="line">)(Count)</span><br></pre></td></tr></table></figure>
<h3 id="使用redux调试工具"><a href="#使用redux调试工具" class="headerlink" title="使用redux调试工具"></a>使用redux调试工具</h3><p><strong>安装chrome浏览器插件</strong></p>
<blockquote>
<p>Redux DecTools</p>
</blockquote>
<p><strong>下载工具依赖包</strong></p>
<blockquote>
<p>npm install –save-dev redux-devtools-extension</p>
</blockquote>
<p><strong>修改store.js</strong></p>
<blockquote>
<p><code>import {composeWithDevTools} from &#39;redux-devtools-extension&#39;</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* 该文件撰文用于暴露一个store对象,整个应用只有一个store对象</span><br><span class="line">*/</span><br><span class="line">//引入createStore,专门用于创建redux中最为核心的store对象</span><br><span class="line">import &#123;createStore,applyMiddleware&#125; from &apos;redux&apos;</span><br><span class="line">//引入汇总后的reducer</span><br><span class="line">import reducer from &apos;./reducers&apos;</span><br><span class="line">//引入redux-thunk，用于支持异步action</span><br><span class="line">import thunk from &apos;redux-thunk&apos;</span><br><span class="line">//引入redux-devtools-extension</span><br><span class="line">import &#123;composeWithDevTools&#125; from &apos;redux-devtools-extension&apos;</span><br><span class="line">//暴露store</span><br><span class="line">export default createStore(reducer,composeWithDevTools(applyMiddleware(thunk)))</span><br></pre></td></tr></table></figure>
<h2 id="React-拓展"><a href="#React-拓展" class="headerlink" title="React 拓展"></a>React 拓展</h2><h3 id="setState"><a href="#setState" class="headerlink" title="setState"></a>setState</h3><p><strong>setState更新状态的2种写法</strong></p>
<blockquote>
<p>(1). setState(stateChange, [callback])——对象式的setState<br>1.stateChange为状态改变对象(该对象可以体现出状态的更改)<br>2.callback是可选的回调函数, 它在状态更新完毕、界面也更新后(render调用后)才被调用</p>
<p>(2). setState(updater, [callback])——函数式的setState</p>
<ul>
<li>updater为返回stateChange对象的函数。</li>
<li>updater可以接收到state和props。</li>
<li>callback是可选的回调函数, 它在状态更新、界面也更新后(render调用后)才被调用。</li>
</ul>
<p>总结:<br>       1.对象式的setState是函数式的setState的简写方式(<code>语法糖</code>)<br>       2.使用原则：<br>               (1).如果新状态不依赖于原状态 ===&gt; 使用对象方式<br>               (2).如果新状态依赖于原状态 ===&gt; 使用函数方式<br>               (3).如果需要在setState()执行后获取最新的状态数据,<br>                   要在第二个callback函数中读取</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">export default class Demo extends Component &#123;</span><br><span class="line">state = &#123; count: 0 &#125;</span><br><span class="line">add = () =&gt; &#123;</span><br><span class="line">//对象式的setState</span><br><span class="line">/* //1.获取原来的count值</span><br><span class="line">const &#123;count&#125; = this.state</span><br><span class="line">//2.更新状态</span><br><span class="line">this.setState(&#123;count:count+1&#125;,()=&gt;&#123; console.log(this.state.count); &#125;)</span><br><span class="line">//console.log(&apos;12行的输出&apos;,this.state.count); //0 */</span><br><span class="line">//函数式的setState</span><br><span class="line">this.setState(state =&gt; (&#123; count: state.count + 1 &#125;))</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">return (</span><br><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;h1&gt;当前求和为：&#123;this.state.count&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;button onClick=&#123;this.add&#125;&gt;点我+1&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">)&#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="lazyLoad"><a href="#lazyLoad" class="headerlink" title="lazyLoad"></a>lazyLoad</h3><p><strong>路由组件的lazyLoad</strong></p>
<ol>
<li>懒加载中的组件,随用随调,不会提前加载</li>
<li>使用懒加载时需要给定一个<code>fallback</code>,用于请求过慢或者请求不到组件时显示,通常为<code>组件</code>(也可以直接为一个<code>虚拟DOM</code>)</li>
<li><code>fallback</code>如果是指定为一个组件,则该组件一定不能指定为<code>懒加载组件</code>,就正常引入的那种组件即可</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//	import Loading from &apos;./Loading&apos; // 用于指定`fallback`</span><br><span class="line">//1.通过React的lazy函数配合import()函数动态加载路由组件 ===&gt; 路由组件代码会被分开打包</span><br><span class="line">	const Login = lazy(()=&gt;import(&apos;@/pages/Login&apos;))</span><br><span class="line">	//2.通过&lt;Suspense&gt;指定在加载得到路由打包文件前显示一个自定义loading界面</span><br><span class="line">	&lt;Suspense fallback=&#123;&lt;h1&gt;loading.....&lt;/h1&gt;&#125;&gt;</span><br><span class="line">    //&lt;Suspense fallback=&#123;&lt;Loading/&gt;&#125;&gt;   指定为组件                 </span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">            &lt;Route path=&quot;/xxx&quot; component=&#123;Xxxx&#125;/&gt;</span><br><span class="line">            &lt;Redirect to=&quot;/login&quot;/&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">    &lt;/Suspense&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h3><p>Hook是React 16.8.0版本增加的新特性/新语法，可以让你在函数组件中使用 state 以及其他的 React 特性</p>
<p><strong>三个常用的Hook</strong></p>
<p>useState()、useEffect()、useRef()</p>
<p><strong>State Hook</strong></p>
<p>State Hook让函数组件也可以有state状态, 并进行状态数据的读写操作<br>语法: const [xxx, setXxx] = React.useState(initValue)<br>useState()说明:<br>   参数: 第一次初始化指定的值在内部作缓存<br>   返回值: 包含2个元素的数组, 第1个为内部当前状态值, 第2个为更新状态值的函数<br>setXxx()2种写法:<br>   setXxx(newValue): 参数为非函数值, 直接指定新的状态值, 内部用其覆盖原来的状态值<br>   setXxx(value =&gt; newValue): 参数为函数, 接收原本的状态值, 返回新的状态值, 内部用其覆盖原来的状态值</p>
<p><strong>Effect Hook</strong></p>
<p> Effect Hook 可以让你在函数组件中执行副作用操作(用于模拟类组件中的生命周期钩子)**<br>React中的副作用操作:<br>   发ajax请求数据获取<br>   设置订阅 / 启动定时器<br>   手动更改真实DOM<br>语法和说明:<br>   useEffect(() =&gt; {<br>     // 在此可以执行任何带副作用操作<br>     return () =&gt; { // 在组件卸载前执行<br>       // 在此做一些收尾工作, 比如清除定时器/取消订阅等<br>     }<br>   }, [stateValue]) // 如果指定的是[], 回调函数只会在第一次render()后执行</p>
<p>可以把 useEffect Hook 看做如下三个函数的组合<br>   componentDidMount()<br>   componentDidUpdate()<br>    componentWillUnmount() </p>
<p><strong>Ref Hook</strong></p>
<p>Ref Hook可以在函数组件中存储/查找组件内的标签或任意其它数据<br>语法: const refContainer = useRef()<br>作用:保存标签对象,功能与React.createRef()一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myRef = React.createRef()</span><br><span class="line">	show = ()=&gt;&#123;</span><br><span class="line">		alert(this.myRef.current.value)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h3><ol>
<li><p>作用:可以不用必须有一个真实的DOM根标签了</p>
</li>
<li><p>当你不得不使用一个<code>容器</code>去包裹dom元素–jsx语法要求,以往我们做法是直接包一层<code>div</code></p>
<ol start="3">
<li><p>使用<code>Fragment</code>后可以<code>取代div</code>,但是编译后会被react丢弃,所以不会造成没必要的层级嵌套</p>
</li>
<li><p>效果等同于直接写一个<code>空标签&lt;&gt;&lt;/&gt;</code>,但是二者有区别</p>
<p><code>区别</code>:<code>Fragment</code>可以添加<code>key</code>属性作为唯一标识,而空标签一点属性都不能加</p>
</li>
</ol>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; Component,Fragment &#125; from &apos;react&apos;</span><br><span class="line"></span><br><span class="line">export default class Demo extends Component &#123;</span><br><span class="line">	render() &#123;</span><br><span class="line">		return (</span><br><span class="line">			&lt;Fragment key=&#123;1&#125;&gt; </span><br><span class="line">				&lt;input type=&quot;text&quot;/&gt;</span><br><span class="line">				&lt;input type=&quot;text&quot;/&gt;</span><br><span class="line">			&lt;/Fragment&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h3><p>一种组件间通信方式, 常用于【祖组件】与【后代组件】间通信</p>
<p>1) 创建Context容器对象：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const XxxContext = React.createContext()</span><br></pre></td></tr></table></figure>
<p>​    2.渲染子组时，外面包裹<code>xxxContext.Provider</code>, 通过value属性给后代组件传递数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;xxxContext.Provider value=&#123;数据&#125;&gt;</span><br><span class="line">		子组件</span><br><span class="line"> &lt;/xxxContext.Provider&gt;</span><br></pre></td></tr></table></figure>
<p>3.后代组件读取数据：<code>两种方法</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//第一种方式:仅适用于类组件 </span><br><span class="line">	  static contextType = xxxContext  // 声明接收context</span><br><span class="line">	  this.context // 读取context中的value数据</span><br><span class="line"></span><br><span class="line">	//第二种方式: 函数组件与类组件都可以</span><br><span class="line">	  &lt;xxxContext.Consumer&gt;</span><br><span class="line">	    &#123;</span><br><span class="line">	      value =&gt; ( // value就是context中的value数据</span><br><span class="line">	        要显示的内容</span><br><span class="line">	      )</span><br><span class="line">	    &#125;</span><br><span class="line">	  &lt;/xxxContext.Consumer&gt;</span><br></pre></td></tr></table></figure>
<p>注意:在应用开发中<code>一般不用context</code>, 一般都用它的封装react插件</p>
<p><strong>完整例子:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">//------------------- 完整例子 ------------------------------------------------</span><br><span class="line">import React, &#123; Component &#125; from &apos;react&apos;</span><br><span class="line">import &apos;./index.css&apos;</span><br><span class="line">//创建Context对象</span><br><span class="line">const MyContext = React.createContext()</span><br><span class="line">const &#123;Provider,Consumer&#125; = MyContext</span><br><span class="line">export default class A extends Component &#123;</span><br><span class="line"></span><br><span class="line">	state = &#123;username:&apos;tom&apos;,age:18&#125;</span><br><span class="line"></span><br><span class="line">	render() &#123;</span><br><span class="line">		const &#123;username,age&#125; = this.state</span><br><span class="line">		return (</span><br><span class="line">			&lt;div className=&quot;parent&quot;&gt;</span><br><span class="line">				&lt;h3&gt;我是A组件&lt;/h3&gt;</span><br><span class="line">				&lt;h4&gt;我的用户名是:&#123;username&#125;&lt;/h4&gt;</span><br><span class="line">				&lt;Provider value=&#123;&#123;username,age&#125;&#125;&gt;</span><br><span class="line">					&lt;B/&gt;</span><br><span class="line">				&lt;/Provider&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class B extends Component &#123;</span><br><span class="line">	render() &#123;</span><br><span class="line">		return (</span><br><span class="line">			&lt;div className=&quot;child&quot;&gt;</span><br><span class="line">				&lt;h3&gt;我是B组件&lt;/h3&gt;</span><br><span class="line">				&lt;C/&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* class C extends Component &#123;</span><br><span class="line">	//声明接收context</span><br><span class="line">	static contextType = MyContext</span><br><span class="line">	render() &#123;</span><br><span class="line">		const &#123;username,age&#125; = this.context</span><br><span class="line">		return (</span><br><span class="line">			&lt;div className=&quot;grand&quot;&gt;</span><br><span class="line">				&lt;h3&gt;我是C组件&lt;/h3&gt;</span><br><span class="line">				&lt;h4&gt;我从A组件接收到的用户名:&#123;username&#125;,年龄是&#123;age&#125;&lt;/h4&gt;</span><br><span class="line">			&lt;/div&gt;</span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125; */</span><br><span class="line"></span><br><span class="line">function C()&#123;</span><br><span class="line">	return (</span><br><span class="line">		&lt;div className=&quot;grand&quot;&gt;</span><br><span class="line">			&lt;h3&gt;我是C组件&lt;/h3&gt;</span><br><span class="line">			&lt;h4&gt;我从A组件接收到的用户名:</span><br><span class="line">			&lt;Consumer&gt;</span><br><span class="line">				&#123;value =&gt; `$&#123;value.username&#125;,年龄是$&#123;value.age&#125;`&#125; //也可以返回标签</span><br><span class="line">			&lt;/Consumer&gt;</span><br><span class="line">			&lt;/h4&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="组件优化-–PureComponent"><a href="#组件优化-–PureComponent" class="headerlink" title="组件优化 –PureComponent"></a>组件优化 –<code>PureComponent</code></h3><blockquote>
<p><strong>Ⅰ-<code>Component的2个问题</code></strong></p>
<ol>
<li>只要执行setState(),即使不改变状态数据, 组件也会重新render() ==&gt; 效率低</li>
<li>只当前组件重新render(), 就会自动重新render子组件，纵使子组件没有用到父组件的任何数据 ==&gt; 效率低</li>
</ol>
<p><strong>Ⅱ-效率高的做法:</strong></p>
<p>只有当组件的state或props数据发生改变时才重新render()</p>
<p><strong>Ⅲ-原因解析</strong></p>
<p>Component中的shouldComponentUpdate()总是返回true</p>
</blockquote>
<h4 id="优化解决"><a href="#优化解决" class="headerlink" title="优化解决"></a>优化解决</h4><blockquote>
<p>办法1:<br>   <code>重写shouldComponentUpdate()</code>方法<br>   比较新旧state或props数据, 如果有变化才返回true, 如果没有返回false<br>办法2:<br>   使用<code>PureComponent</code><br>   PureComponent重写了shouldComponentUpdate(), 只有state或props数据有变化才返回true<br>   注意:<br>       只是进行state和props数据的<code>浅比较</code>, 如果只是数据对象内部数据变了, 返回false<br>       不要直接修改state数据, 而是要<code>产生新数据</code><br>项目中一般使用PureComponent来优化</p>
</blockquote>
<p>优化代码示例:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">state = &#123; <span class="attr">carName</span>: <span class="string">"奔驰c36"</span>, <span class="attr">stus</span>: [<span class="string">'小张'</span>, <span class="string">'小李'</span>, <span class="string">'小王'</span>] &#125;</span><br><span class="line">addStu = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"><span class="comment">/* const &#123;stus&#125; = this.state</span></span><br><span class="line"><span class="comment">stus.unshift('小刘')</span></span><br><span class="line"><span class="comment">this.setState(&#123;stus&#125;) */</span></span><br><span class="line"><span class="keyword">const</span> &#123; stus &#125; = <span class="keyword">this</span>.state</span><br><span class="line"><span class="keyword">this</span>.setState(&#123; <span class="attr">stus</span>: [<span class="string">'小刘'</span>, ...stus] &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">changeCar = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//this.setState(&#123;carName:'迈巴赫'&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = <span class="keyword">this</span>.state</span><br><span class="line">obj.carName = <span class="string">'迈巴赫'</span></span><br><span class="line"><span class="built_in">console</span>.log(obj === <span class="keyword">this</span>.state);</span><br><span class="line"><span class="keyword">this</span>.setState(obj)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* shouldComponentUpdate(nextProps,nextState)&#123;</span></span><br><span class="line"><span class="comment">// console.log(this.props,this.state); //目前的props和state</span></span><br><span class="line"><span class="comment">// console.log(nextProps,nextState); //接下要变化的目标props，目标state</span></span><br><span class="line"><span class="comment">return !this.state.carName === nextState.carName</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"></span><br><span class="line">render() &#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Parent---render'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; carName &#125; = <span class="keyword">this</span>.state</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"> &lt;div className=<span class="string">"parent"</span>&gt;</span><br><span class="line">   &lt;h3&gt;我是Parent组件&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">   &#123;this.state.stus&#125;&amp;nbsp;</span></span><br><span class="line"><span class="regexp">   &lt;span&gt;我的车名字是：&#123;carName&#125;&lt;/</span>span&gt;&lt;br /&gt;</span><br><span class="line">   &lt;button onClick=&#123;<span class="keyword">this</span>.changeCar&#125;&gt;点我换车&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">   &lt;button onClick=&#123;this.addStu&#125;&gt;添加一个小刘&lt;/</span>button&gt;</span><br><span class="line">   &lt;Child carName=<span class="string">"奥拓"</span> /&gt;</span><br><span class="line"> &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Child extends PureComponent &#123;</span></span><br><span class="line"><span class="regexp">/</span>* shouldComponentUpdate(nextProps,nextState)&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.props,<span class="keyword">this</span>.state); <span class="comment">//目前的props和state</span></span><br><span class="line"><span class="built_in">console</span>.log(nextProps,nextState); <span class="comment">//接下要变化的目标props，目标state</span></span><br><span class="line"><span class="keyword">return</span> !<span class="keyword">this</span>.props.carName === nextProps.carName</span><br><span class="line">&#125; *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">render() &#123;</span></span><br><span class="line"><span class="regexp">console.log('Child---render');</span></span><br><span class="line"><span class="regexp">return (</span></span><br><span class="line"><span class="regexp"> &lt;div className="child"&gt;</span></span><br><span class="line"><span class="regexp">   &lt;h3&gt;我是Child组件&lt;/</span>h3&gt;</span><br><span class="line">   &lt;span&gt;我接到的车是：&#123;<span class="keyword">this</span>.props.carName&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp"> &lt;/</span>div&gt;</span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="render-props-—类似vue插槽"><a href="#render-props-—类似vue插槽" class="headerlink" title="render props  —类似vue插槽"></a>render props  —类似vue插槽</h3><blockquote>
<ol>
<li>如何向组件内部动态传入带内容的结构(标签)?</li>
</ol>
<p>Vue中:<br>   使用slot技术, 也就是通过组件标签体传入结构  <a><b></b></a><br>React中:<br>   使用children props: 通过组件标签体传入结构<br>   使用render props: 通过组件标签属性传入结构,而且可以携带数据，一般用render函数属性</p>
<ol start="2">
<li>children props</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;A&gt;</span><br><span class="line">&gt;&lt;B&gt;xxxx&lt;/B&gt;</span><br><span class="line">&gt;&lt;/A&gt;</span><br><span class="line">&gt;&#123;<span class="keyword">this</span>.props.children&#125;</span><br><span class="line">&gt;问题: 如果B组件需要A组件内的数据, ==&gt; 做不到 </span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<ol start="3">
<li>render props</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;A render=&#123;(data) =&gt; &lt;C data=&#123;data&#125;&gt;&lt;/C&gt;&#125;&gt;&lt;/A&gt;</span><br><span class="line">&gt;A组件: &#123;<span class="keyword">this</span>.props.render(内部state数据)&#125;</span><br><span class="line">&gt;C组件: 读取A组件传入的数据显示 &#123;<span class="keyword">this</span>.props.data&#125;</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<ol start="4">
<li>示例</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line">&gt;<span class="keyword">import</span> <span class="string">'./index.css'</span></span><br><span class="line">&gt;<span class="keyword">import</span> C <span class="keyword">from</span> <span class="string">'../1_setState'</span></span><br><span class="line">&gt;</span><br><span class="line">&gt;<span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">&gt;	render() &#123;</span><br><span class="line">&gt;		<span class="keyword">return</span> (</span><br><span class="line">&gt;			&lt;div className="parent"&gt;</span><br><span class="line">&gt;				&lt;h3&gt;我是Parent组件&lt;/h3&gt;</span><br><span class="line">&gt;				&lt;A render=&#123;(name)=&gt;&lt;C name=&#123;name&#125;/&gt;&#125;/&gt;</span><br><span class="line">&gt;			&lt;/div&gt;</span><br><span class="line">&gt;		)</span><br><span class="line">&gt;	&#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line">&gt;</span><br><span class="line">&gt;<span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">&gt;	state = &#123;<span class="attr">name</span>:<span class="string">'tom'</span>&#125;</span><br><span class="line">&gt;	render() &#123;</span><br><span class="line">&gt;		<span class="built_in">console</span>.log(<span class="keyword">this</span>.props);</span><br><span class="line">&gt;		<span class="keyword">const</span> &#123;name&#125; = <span class="keyword">this</span>.state</span><br><span class="line">&gt;		<span class="keyword">return</span> (</span><br><span class="line">&gt;			&lt;div className="a"&gt;</span><br><span class="line">&gt;				&lt;h3&gt;我是A组件&lt;/h3&gt;</span><br><span class="line">&gt;				&#123;this.props.render(name)&#125;</span><br><span class="line">&gt;			&lt;/div&gt;</span><br><span class="line">&gt;		)</span><br><span class="line">&gt;	&#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line">&gt;</span><br><span class="line">&gt;<span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">&gt;	render() &#123;</span><br><span class="line">&gt;		<span class="built_in">console</span>.log(<span class="string">'B--render'</span>);</span><br><span class="line">&gt;		<span class="keyword">return</span> (</span><br><span class="line">&gt;			&lt;div className="b"&gt;</span><br><span class="line">&gt;				&lt;h3&gt;我是B组件,&#123;this.props.name&#125;&lt;/h3&gt;</span><br><span class="line">&gt;			&lt;/div&gt;</span><br><span class="line">&gt;		)</span><br><span class="line">&gt;	&#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<hr>
<h3 id="错误边界"><a href="#错误边界" class="headerlink" title="错误边界"></a>错误边界</h3><ol>
<li>理解：</li>
</ol>
<p>​    错误边界(Error boundary)：用来捕获后代组件错误，渲染出备用页面</p>
<ol start="2">
<li>特点：</li>
</ol>
<p>​    <code>只能捕获后代组件生命周期</code>产生的错误，<code>不能捕获自己组件</code>产生的错误和其他组件在合成事件、定时器中产生的错误</p>
<ol start="3">
<li><p>getDerivedStateFromError配合componentDidCatch</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生命周期函数，一旦后台组件报错，就会触发</span></span><br><span class="line"><span class="keyword">static</span> getDerivedStateFromError(error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">    <span class="comment">// 在render之前触发</span></span><br><span class="line">    <span class="comment">// 返回新的state</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        hasError: <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">componentDidCatch(error, info) &#123;</span><br><span class="line">    <span class="comment">// 统计页面的错误。发送请求发送到后台去</span></span><br><span class="line">    <span class="built_in">console</span>.log(error, info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>代码示例</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">'./Child'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  state = &#123;</span><br><span class="line">    hasError: <span class="string">''</span> <span class="comment">//用于标识子组件是否产生错误</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//当Parent的子组件出现报错时候，会触发getDerivedStateFromError调用，并携带错误信息</span></span><br><span class="line">  <span class="keyword">static</span> getDerivedStateFromError(error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'@@@'</span>, error);</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">hasError</span>: error &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidCatch() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'此处统计错误，反馈给服务器，用于通知编码人员进行bug的解决'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;我是Parent组件&lt;<span class="regexp">/h2&gt;</span></span><br><span class="line"><span class="regexp">        &#123;this.state.hasError ? &lt;h2&gt;当前网络不稳定，稍后再试&lt;/</span>h2&gt; : &lt;Child /&gt;&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="组件通信方式总结"><a href="#组件通信方式总结" class="headerlink" title="组件通信方式总结"></a>组件通信方式总结</h3><blockquote>
<ol>
<li>组件间的关系：</li>
</ol>
<ul>
<li>父子组件</li>
<li>兄弟组件（非嵌套组件）</li>
<li>祖孙组件（跨级组件）</li>
</ul>
<ol start="2">
<li>几种通信方式：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;  - props：</span><br><span class="line">&gt;   <span class="number">1</span>).children props</span><br><span class="line">&gt;   (<span class="number">2</span>).render props</span><br><span class="line">&gt;</span><br><span class="line">&gt;  - 消息订阅-发布：</span><br><span class="line">&gt;   ubs-sub、event等等</span><br><span class="line">&gt;</span><br><span class="line">&gt;  - 集中式管理：</span><br><span class="line">&gt;   redux、dva等等</span><br><span class="line">&gt;</span><br><span class="line">&gt;  - conText:</span><br><span class="line">&gt;   生产者-消费者模式</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<ol start="3">
<li>比较好的搭配方式</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;  - 父子组件：props</span><br><span class="line">&gt;  - 兄弟组件：消息订阅-发布、集中式管理</span><br><span class="line">&gt;  - 祖孙组件(跨级组件)：消息订阅-发布、集中式管理、conText(开发用的少，封装插件用的多)</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>

    </div>

    
    
    

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2022/09/06/Webpack5/" rel="next" title="Webpack5">
                  <i class="fa fa-chevron-left"></i> Webpack5
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#React复习手册"><span class="nav-number">1.</span> <span class="nav-text">React复习手册</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#概述"><span class="nav-number">1.1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特点"><span class="nav-number">1.1.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#react-高效的原因"><span class="nav-number">1.1.2.</span> <span class="nav-text">react 高效的原因</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建虚拟DOM的两种方式"><span class="nav-number">1.1.3.</span> <span class="nav-text">创建虚拟DOM的两种方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关于虚拟DOM"><span class="nav-number">1.1.4.</span> <span class="nav-text">关于虚拟DOM</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三个API"><span class="nav-number">1.2.</span> <span class="nav-text">三个API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#React-createElement"><span class="nav-number">1.2.1.</span> <span class="nav-text">React.createElement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ReactDOM-createRoot"><span class="nav-number">1.2.2.</span> <span class="nav-text">ReactDOM.createRoot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#render"><span class="nav-number">1.2.3.</span> <span class="nav-text">render</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSX"><span class="nav-number">1.3.</span> <span class="nav-text">JSX</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本使用"><span class="nav-number">1.3.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注意点"><span class="nav-number">1.3.2.</span> <span class="nav-text">注意点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSX-中使用-js-表达式"><span class="nav-number">1.3.3.</span> <span class="nav-text">JSX 中使用 js 表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSX-的条件渲染"><span class="nav-number">1.3.4.</span> <span class="nav-text">JSX 的条件渲染</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSX的列表渲染"><span class="nav-number">1.3.5.</span> <span class="nav-text">JSX的列表渲染</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSX的样式处理"><span class="nav-number">1.3.6.</span> <span class="nav-text">JSX的样式处理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#react组件"><span class="nav-number">1.4.</span> <span class="nav-text">react组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#函数式声明组件"><span class="nav-number">1.4.1.</span> <span class="nav-text">函数式声明组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类式组件-下面的实例都是指类组件"><span class="nav-number">1.4.2.</span> <span class="nav-text">类式组件(下面的实例都是指类组件)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块与模块化"><span class="nav-number">1.4.3.</span> <span class="nav-text">模块与模块化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件与组件化"><span class="nav-number">1.4.4.</span> <span class="nav-text">组件与组件化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React面向组件编程"><span class="nav-number">1.5.</span> <span class="nav-text">React面向组件编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#组件三大属性-state"><span class="nav-number">1.5.1.</span> <span class="nav-text">组件三大属性 state</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件三大属性-props"><span class="nav-number">1.5.2.</span> <span class="nav-text">组件三大属性 props</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件三大属性-refs"><span class="nav-number">1.5.3.</span> <span class="nav-text">组件三大属性 refs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事件处理与收集表单数据"><span class="nav-number">1.5.4.</span> <span class="nav-text">事件处理与收集表单数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高阶函数与函数柯里化"><span class="nav-number">1.5.5.</span> <span class="nav-text">高阶函数与函数柯里化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生命周期"><span class="nav-number">1.6.</span> <span class="nav-text">生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#旧生命周期-react16前"><span class="nav-number">1.6.1.</span> <span class="nav-text">旧生命周期 react16前</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生命周期新"><span class="nav-number">1.6.2.</span> <span class="nav-text">生命周期新</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重要的钩子"><span class="nav-number">1.6.3.</span> <span class="nav-text">重要的钩子</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#即将废弃的钩子"><span class="nav-number">1.6.4.</span> <span class="nav-text">即将废弃的钩子</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#react中的key"><span class="nav-number">1.7.</span> <span class="nav-text">react中的key</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React脚手架"><span class="nav-number">1.8.</span> <span class="nav-text">React脚手架</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React-ajax"><span class="nav-number">1.9.</span> <span class="nav-text">React ajax</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#React中配置代理-proxy"><span class="nav-number">1.9.1.</span> <span class="nav-text">React中配置代理(proxy)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#补充知识点-消息订阅与发布机制等"><span class="nav-number">1.9.2.</span> <span class="nav-text">补充知识点 消息订阅与发布机制等</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fetch发送请求"><span class="nav-number">1.9.3.</span> <span class="nav-text">fetch发送请求</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React-路由"><span class="nav-number">1.10.</span> <span class="nav-text">React 路由</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SPA的理解"><span class="nav-number">1.10.1.</span> <span class="nav-text">SPA的理解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由的理解"><span class="nav-number">1.10.2.</span> <span class="nav-text">路由的理解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#react-router-dom的理解"><span class="nav-number">1.10.3.</span> <span class="nav-text">react-router-dom的理解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由的基本使用"><span class="nav-number">1.10.4.</span> <span class="nav-text">路由的基本使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由组件与一般组件"><span class="nav-number">1.10.5.</span> <span class="nav-text">路由组件与一般组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NavLink使用与封装"><span class="nav-number">1.10.6.</span> <span class="nav-text">NavLink使用与封装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Switch的使用"><span class="nav-number">1.10.7.</span> <span class="nav-text">Switch的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决多级路径刷新页面样式丢失的问题"><span class="nav-number">1.10.8.</span> <span class="nav-text">解决多级路径刷新页面样式丢失的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由的严格匹配与模糊匹配"><span class="nav-number">1.10.9.</span> <span class="nav-text">路由的严格匹配与模糊匹配</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redirect的使用"><span class="nav-number">1.10.10.</span> <span class="nav-text">Redirect的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#嵌套路由"><span class="nav-number">1.10.11.</span> <span class="nav-text">嵌套路由</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#向路由组件传递参数"><span class="nav-number">1.10.12.</span> <span class="nav-text">向路由组件传递参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#编程式路由导航"><span class="nav-number">1.10.13.</span> <span class="nav-text">编程式路由导航</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#withRouter的使用"><span class="nav-number">1.10.14.</span> <span class="nav-text">withRouter的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BrowserRouter与HashRouter的区别"><span class="nav-number">1.10.15.</span> <span class="nav-text">BrowserRouter与HashRouter的区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ant-Design"><span class="nav-number">1.11.</span> <span class="nav-text">Ant Design</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#按需引入与自定义主题"><span class="nav-number">1.11.1.</span> <span class="nav-text">按需引入与自定义主题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redux"><span class="nav-number">1.12.</span> <span class="nav-text">Redux</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#redux是什么"><span class="nav-number">1.12.1.</span> <span class="nav-text">redux是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#什么情况下需要使用redux"><span class="nav-number">1.12.2.</span> <span class="nav-text">什么情况下需要使用redux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#redux工作流程"><span class="nav-number">1.12.3.</span> <span class="nav-text">redux工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#redux的三个核心概念"><span class="nav-number">1.12.4.</span> <span class="nav-text">redux的三个核心概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#redux的核心API"><span class="nav-number">1.12.5.</span> <span class="nav-text">redux的核心API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#redux-异步编程"><span class="nav-number">1.12.6.</span> <span class="nav-text">redux 异步编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#react-redux"><span class="nav-number">1.12.7.</span> <span class="nav-text">react-redux</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#相关API"><span class="nav-number">1.12.7.1.</span> <span class="nav-text">相关API</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用redux调试工具"><span class="nav-number">1.12.8.</span> <span class="nav-text">使用redux调试工具</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React-拓展"><span class="nav-number">1.13.</span> <span class="nav-text">React 拓展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#setState"><span class="nav-number">1.13.1.</span> <span class="nav-text">setState</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lazyLoad"><span class="nav-number">1.13.2.</span> <span class="nav-text">lazyLoad</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hooks"><span class="nav-number">1.13.3.</span> <span class="nav-text">Hooks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Fragment"><span class="nav-number">1.13.4.</span> <span class="nav-text">Fragment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Context"><span class="nav-number">1.13.5.</span> <span class="nav-text">Context</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件优化-–PureComponent"><span class="nav-number">1.13.6.</span> <span class="nav-text">组件优化 –PureComponent</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#优化解决"><span class="nav-number">1.13.6.1.</span> <span class="nav-text">优化解决</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#render-props-—类似vue插槽"><span class="nav-number">1.13.7.</span> <span class="nav-text">render props  —类似vue插槽</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#错误边界"><span class="nav-number">1.13.8.</span> <span class="nav-text">错误边界</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件通信方式总结"><span class="nav-number">1.13.9.</span> <span class="nav-text">组件通信方式总结</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="WayneLee"
    src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">WayneLee</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/waynelee7" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;waynelee7" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yourname@gmail.com" title="E-Mail &amp;rarr; mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WayneLee</span>
</div>
  <!--<div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0
  </div>
  -->
<!--
  <span class="post-meta-divider">|</span>
-->
  <!-- <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.5.0
  </div> 
  -->
<!-- 在网页底部添加网站运行时间 -->
<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("10/11/2018 00:00:00");//
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "网站已运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
setInterval("createtime()",250);
</script>


        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":250,"height":400},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
